(function(t){function s(s){for(var n,r,o=s[0],c=s[1],d=s[2],l=0,m=[];l<o.length;l++)r=o[l],a[r]&&m.push(a[r][0]),a[r]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);u&&u(s);while(m.length)m.shift()();return i.push.apply(i,d||[]),e()}function e(){for(var t,s=0;s<i.length;s++){for(var e=i[s],n=!0,o=1;o<e.length;o++){var c=e[o];0!==a[c]&&(n=!1)}n&&(i.splice(s--,1),t=r(r.s=e[0]))}return t}var n={},a={1:0},i=[];function r(s){if(n[s])return n[s].exports;var e=n[s]={i:s,l:!1,exports:{}};return t[s].call(e.exports,e,e.exports,r),e.l=!0,e.exports}r.m=t,r.c=n,r.d=function(t,s,e){r.o(t,s)||Object.defineProperty(t,s,{configurable:!1,enumerable:!0,get:e})},r.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},r.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return r.d(s,"a",s),s},r.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},r.p="/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],c=o.push.bind(o);o.push=s,o=o.slice();for(var d=0;d<o.length;d++)s(o[d]);var u=c;i.push([14,0]),e()})({13:function(t,s){},14:function(t,s,e){t.exports=e("Vtdi")},"3Th+":function(t,s,e){},"5QYt":function(t,s,e){},"7Asr":function(t,s,e){"use strict";var n=e("I05g"),a=e.n(n);a.a},"7DnG":function(t,s,e){"use strict";var n=e("GGXb"),a=e.n(n);a.a},"89Bz":function(t,s,e){},G9df:function(t,s,e){t.exports=e.p+"img/rank_bg.ed141f67.jpg"},GGXb:function(t,s,e){},I05g:function(t,s,e){},J5I2:function(t,s,e){},NnjG:function(t,s,e){t.exports=e.p+"img/fight_bg.6eee84c3.jpg"},RnhZ:function(t,s,e){var n={"./af":"K/tc","./af.js":"K/tc","./ar":"jnO4","./ar-dz":"o1bE","./ar-dz.js":"o1bE","./ar-kw":"Qj4J","./ar-kw.js":"Qj4J","./ar-ly":"HP3h","./ar-ly.js":"HP3h","./ar-ma":"CoRJ","./ar-ma.js":"CoRJ","./ar-sa":"gjCT","./ar-sa.js":"gjCT","./ar-tn":"bYM6","./ar-tn.js":"bYM6","./ar.js":"jnO4","./az":"SFxW","./az.js":"SFxW","./be":"H8ED","./be.js":"H8ED","./bg":"hKrs","./bg.js":"hKrs","./bm":"p/rL","./bm.js":"p/rL","./bn":"kEOa","./bn.js":"kEOa","./bo":"0mo+","./bo.js":"0mo+","./br":"aIdf","./br.js":"aIdf","./bs":"JVSJ","./bs.js":"JVSJ","./ca":"1xZ4","./ca.js":"1xZ4","./cs":"PA2r","./cs.js":"PA2r","./cv":"A+xa","./cv.js":"A+xa","./cy":"l5ep","./cy.js":"l5ep","./da":"DxQv","./da.js":"DxQv","./de":"tGlX","./de-at":"s+uk","./de-at.js":"s+uk","./de-ch":"u3GI","./de-ch.js":"u3GI","./de.js":"tGlX","./dv":"WYrj","./dv.js":"WYrj","./el":"jUeY","./el.js":"jUeY","./en-au":"Dmvi","./en-au.js":"Dmvi","./en-ca":"OIYi","./en-ca.js":"OIYi","./en-gb":"Oaa7","./en-gb.js":"Oaa7","./en-ie":"4dOw","./en-ie.js":"4dOw","./en-il":"czMo","./en-il.js":"czMo","./en-nz":"b1Dy","./en-nz.js":"b1Dy","./eo":"Zduo","./eo.js":"Zduo","./es":"iYuL","./es-do":"CjzT","./es-do.js":"CjzT","./es-us":"Vclq","./es-us.js":"Vclq","./es.js":"iYuL","./et":"7BjC","./et.js":"7BjC","./eu":"D/JM","./eu.js":"D/JM","./fa":"jfSC","./fa.js":"jfSC","./fi":"gekB","./fi.js":"gekB","./fo":"ByF4","./fo.js":"ByF4","./fr":"nyYc","./fr-ca":"2fjn","./fr-ca.js":"2fjn","./fr-ch":"Dkky","./fr-ch.js":"Dkky","./fr.js":"nyYc","./fy":"cRix","./fy.js":"cRix","./gd":"9rRi","./gd.js":"9rRi","./gl":"iEDd","./gl.js":"iEDd","./gom-latn":"DKr+","./gom-latn.js":"DKr+","./gu":"4MV3","./gu.js":"4MV3","./he":"x6pH","./he.js":"x6pH","./hi":"3E1r","./hi.js":"3E1r","./hr":"S6ln","./hr.js":"S6ln","./hu":"WxRl","./hu.js":"WxRl","./hy-am":"1rYy","./hy-am.js":"1rYy","./id":"UDhR","./id.js":"UDhR","./is":"BVg3","./is.js":"BVg3","./it":"bpih","./it.js":"bpih","./ja":"B55N","./ja.js":"B55N","./jv":"tUCv","./jv.js":"tUCv","./ka":"IBtZ","./ka.js":"IBtZ","./kk":"bXm7","./kk.js":"bXm7","./km":"6B0Y","./km.js":"6B0Y","./kn":"PpIw","./kn.js":"PpIw","./ko":"Ivi+","./ko.js":"Ivi+","./ky":"lgnt","./ky.js":"lgnt","./lb":"RAwQ","./lb.js":"RAwQ","./lo":"sp3z","./lo.js":"sp3z","./lt":"JvlW","./lt.js":"JvlW","./lv":"uXwI","./lv.js":"uXwI","./me":"KTz0","./me.js":"KTz0","./mi":"aIsn","./mi.js":"aIsn","./mk":"aQkU","./mk.js":"aQkU","./ml":"AvvY","./ml.js":"AvvY","./mn":"lYtQ","./mn.js":"lYtQ","./mr":"Ob0Z","./mr.js":"Ob0Z","./ms":"6+QB","./ms-my":"ZAMP","./ms-my.js":"ZAMP","./ms.js":"6+QB","./mt":"G0Uy","./mt.js":"G0Uy","./my":"honF","./my.js":"honF","./nb":"bOMt","./nb.js":"bOMt","./ne":"OjkT","./ne.js":"OjkT","./nl":"+s0g","./nl-be":"2ykv","./nl-be.js":"2ykv","./nl.js":"+s0g","./nn":"uEye","./nn.js":"uEye","./pa-in":"8/+R","./pa-in.js":"8/+R","./pl":"jVdC","./pl.js":"jVdC","./pt":"8mBD","./pt-br":"0tRk","./pt-br.js":"0tRk","./pt.js":"8mBD","./ro":"lyxo","./ro.js":"lyxo","./ru":"lXzo","./ru.js":"lXzo","./sd":"Z4QM","./sd.js":"Z4QM","./se":"//9w","./se.js":"//9w","./si":"7aV9","./si.js":"7aV9","./sk":"e+ae","./sk.js":"e+ae","./sl":"gVVK","./sl.js":"gVVK","./sq":"yPMs","./sq.js":"yPMs","./sr":"zx6S","./sr-cyrl":"E+lV","./sr-cyrl.js":"E+lV","./sr.js":"zx6S","./ss":"Ur1D","./ss.js":"Ur1D","./sv":"X709","./sv.js":"X709","./sw":"dNwA","./sw.js":"dNwA","./ta":"PeUW","./ta.js":"PeUW","./te":"XLvN","./te.js":"XLvN","./tet":"V2x9","./tet.js":"V2x9","./tg":"Oxv6","./tg.js":"Oxv6","./th":"EOgW","./th.js":"EOgW","./tl-ph":"Dzi0","./tl-ph.js":"Dzi0","./tlh":"z3Vd","./tlh.js":"z3Vd","./tr":"DoHr","./tr.js":"DoHr","./tzl":"z1FC","./tzl.js":"z1FC","./tzm":"wQk9","./tzm-latn":"tT3J","./tzm-latn.js":"tT3J","./tzm.js":"wQk9","./ug-cn":"YRex","./ug-cn.js":"YRex","./uk":"raLr","./uk.js":"raLr","./ur":"UpQW","./ur.js":"UpQW","./uz":"Loxo","./uz-latn":"AQ68","./uz-latn.js":"AQ68","./uz.js":"Loxo","./vi":"KSF8","./vi.js":"KSF8","./x-pseudo":"/X5v","./x-pseudo.js":"/X5v","./yo":"fzPg","./yo.js":"fzPg","./zh-cn":"XDpg","./zh-cn.js":"XDpg","./zh-hk":"SatO","./zh-hk.js":"SatO","./zh-tw":"kOpN","./zh-tw.js":"kOpN"};function a(t){var s=i(t),n=e(s);return n}function i(t){var s=n[t];if(!(s+1)){var e=new Error('Cannot find module "'+t+'".');throw e.code="MODULE_NOT_FOUND",e}return s}a.keys=function(){return Object.keys(n)},a.resolve=i,t.exports=a,a.id="RnhZ"},Tm8U:function(t,s,e){"use strict";var n=e("89Bz"),a=e.n(n);a.a},"VO+i":function(t,s,e){"use strict";var n=e("5QYt"),a=e.n(n);a.a},Vtdi:function(t,s,e){"use strict";e.r(s);e("VRzm");var n=e("Kw5r"),a=e("Q/mQ"),i=e.n(a),r=e("ChK9"),o=e.n(r),c=e("gFX4"),d=e.n(c),u=e("wd/R"),l=e.n(u),m=(e("Ud79"),e("4JRs"),e("0G0I"),e("CHRH")),h=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"md-layout md-alignment-center-center",attrs:{id:"app"}},[e("div",{staticClass:"bg"}),t._v(" "),e("router-view",{staticClass:"md-layout-item md-small-size-100 md-size-50"})],1)},p=[],v=(e("f3/d"),e("INYr"),e("pIFo"),e("L2JU")),f={name:"app",computed:Object(v["b"])({user:function(t){return t.user},mchId:function(t){return t.mchId}}),mounted:function(){var t=this;this.user&&this.$socket.emit("online",{userId:this.user.uid,mchId:this.mchId}),this.$watch("user",function(){t.user?t.$socket.emit("online",{userId:t.user.uid,mchId:t.mchId}):t.$router.replace("/login")}),this.$socket.on("connect",function(){t.user&&t.$socket.emit("online",{userId:t.user.uid,mchId:t.mchId})}),this.$socket.on("logout",function(s){var e=s.userId,n=s.mchId;t.user&&t.user.uid===e&&t.mchId!==n&&t.$store.commit("logout")}),this.$socket.on("fight",function(s){var e=s.userIds,n=s.chapterId,a=s.roomId,i=s.chapterName;-1!==e.map(function(t){return parseInt(t)}).findIndex(function(s){return s===t.user.uid})&&("battle"===t.$router.currentRoute.name?t.$router.replace({path:"/battle",query:{roomId:a,chapterId:n,chapterName:i}}):t.$router.push({path:"/battle",query:{roomId:a,chapterId:n,chapterName:i}}))})}},_=f,g=(e("nNx0"),e("KHd+")),k=Object(g["a"])(_,h,p,!1,null,null,null),w=k.exports,j=e("jE9Z"),b=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"home"},[t._m(0),t._v(" "),n("person-card"),t._v(" "),n("img",{staticClass:"md-raised md-primary link",attrs:{id:"fight",src:e("NnjG")},on:{click:function(s){t.$router.push("/topic-chosen")}}}),t._v(" "),n("img",{staticClass:"md-raised md-primary link",attrs:{id:"record",src:e("XvsG")},on:{click:function(s){t.$router.push("/record")}}}),t._v(" "),n("img",{staticClass:"md-raised md-primary link",attrs:{id:"rank",src:e("G9df")},on:{click:function(s){t.$router.push("/ranking")}}})],1)},C=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"md-layout"},[e("p",[t._v("通信工知识竞技对战平台")])])}],y=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("md-card",{staticClass:"md-primary"},[n("md-card-content",[n("md-avatar",{staticClass:"md-large"},[n("img",{attrs:{src:e("zwU1"),alt:"Avatar"}})]),t._v(" "),n("div",{staticClass:"name"},[t._v(t._s(t.user.nickname))])],1),t._v(" "),n("md-card-actions",[n("md-button",{attrs:{to:"/personal"}},[t._v("修改资料")]),t._v(" "),n("md-button",{staticClass:"md-accent md-raised",on:{click:function(s){t.logout()}}},[t._v("退出登录")])],1)],1)},R=[],I={name:"person-card",computed:Object(v["b"])({user:function(t){return t.user}}),data:function(){return{amount:50}},methods:{logout:function(){this.$store.commit("logout")}}},x=I,z=(e("7Asr"),Object(g["a"])(x,y,R,!1,null,"39a6c8db",null)),O=z.exports,Q={components:{PersonCard:O},name:"home"},$=Q,q=(e("xaZR"),Object(g["a"])($,b,C,!1,null,"0076efbb",null)),S=q.exports,A=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("md-card",{staticClass:"login"},[e("md-card-header",[e("div",{staticClass:"md-title"},[t._v("登录")])]),t._v(" "),e("md-card-content",[e("div",{staticClass:"md-layout md-size-75 md-alignment-center"},[e("md-field",{staticClass:"md-layout-item md-size-75"},[e("label",[t._v("昵称")]),t._v(" "),e("md-input",{model:{value:t.nickname,callback:function(s){t.nickname=s},expression:"nickname"}})],1),t._v(" "),e("md-field",{staticClass:"md-layout-item md-size-75"},[e("label",[t._v("密码")]),t._v(" "),e("md-input",{attrs:{type:"password"},model:{value:t.password,callback:function(s){t.password=s},expression:"password"}})],1),t._v(" "),e("md-button",{staticClass:"md-raised md-primary md-layout-item md-size-75",attrs:{disabled:!t.nickname||!t.password},on:{click:function(s){t.login()}}},[t._v("登录")]),t._v(" "),e("md-button",{staticClass:"md-flat md-primary md-layout-item md-size-75",attrs:{to:"/register"}},[t._v("尚未注册？")])],1)]),t._v(" "),e("md-snackbar",{attrs:{"md-position":"left","md-duration":2e3,"md-active":t.showSnack,"md-persistent":""},on:{"update:mdActive":function(s){t.showSnack=s}}},[e("span",[t._v(t._s(t.msg))])])],1)},M=[],D={name:"login",data:function(){return{nickname:"",password:"",msg:"",showSnack:!1}},methods:{login:function(){var t=this;this.$http.post("/user/login",{nickname:this.nickname,password:this.password}).then(function(s){t.$store.commit("setUser",s),t.$router.replace("/")}).catch(function(s){t.msg=s.msg,t.showSnack=!0})}}},P=D,N=(e("7DnG"),Object(g["a"])(P,A,M,!1,null,"5853ed2d",null)),B=N.exports,U=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("md-card",{staticClass:"register"},[e("md-card-header",[e("div",{staticClass:"md-title"},[t._v("注册")])]),t._v(" "),e("md-card-content",[e("div",{staticClass:"md-layout md-size-75 md-alignment-center"},[e("md-field",{staticClass:"md-layout-item md-size-75"},[e("label",[t._v("昵称")]),t._v(" "),e("md-input",{model:{value:t.nickname,callback:function(s){t.nickname=s},expression:"nickname"}})],1),t._v(" "),e("md-field",{staticClass:"md-layout-item md-size-75"},[e("label",[t._v("密码")]),t._v(" "),e("md-input",{attrs:{type:"password"},model:{value:t.password,callback:function(s){t.password=s},expression:"password"}})],1),t._v(" "),e("md-button",{staticClass:"md-raised md-primary md-layout-item md-size-75",attrs:{disabled:!t.nickname||!t.password},on:{click:function(s){t.register()}}},[t._v("注册")]),t._v(" "),e("md-button",{staticClass:"md-flat md-primary md-layout-item md-size-75",attrs:{to:"/login"}},[t._v("已有账号？")])],1)]),t._v(" "),e("md-snackbar",{attrs:{"md-position":"left","md-duration":2e3,"md-active":t.showSnack,"md-persistent":""},on:{"update:mdActive":function(s){t.showSnack=s}}},[e("span",[t._v(t._s(t.msg))])])],1)},E=[],V={name:"register",data:function(){return{nickname:"",password:"",showSnack:!1,msg:""}},methods:{register:function(){var t=this;this.$http.post("/user/save",{nickname:this.nickname,password:this.password}).then(function(s){t.msg="注册成功，即将跳转至登录页面…",t.showSnack=!0,window.setTimeout(function(){t.$router.push("/login")},2e3)}).catch(function(s){t.msg=s.msg,t.showSnack=!0})}}},Y=V,T=(e("hhSi"),Object(g["a"])(Y,U,E,!1,null,"622d0038",null)),X=T.exports,J=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"topic-chosen"},[e("div",{staticClass:"header md-layout md-alignment-center-left",on:{click:function(s){t.goBack()}}},[e("icon",{attrs:{name:"angle-left",scale:"2"}}),t._v(" "),e("span",{staticClass:"text"},[t._v("双人对战")])],1),t._v(" "),e("person-card"),t._v(" "),e("md-list",{staticClass:"md-elevation-2"},t._l(t.courses,function(s){return e("md-list-item",{key:s.courseId,attrs:{"md-expand":""}},[e("span",{staticClass:"md-list-item-text"},[t._v(t._s(s.course))]),t._v(" "),e("md-list",{attrs:{slot:"md-expand"},slot:"md-expand"},t._l(s.chapters,function(s){return e("md-list-item",{key:s.chapterId,staticClass:"md-inset",on:{click:function(e){t.startBattle(s.chapterId,s.chapter)}}},[t._v(t._s(s.chapter))])}))],1)})),t._v(" "),e("md-dialog",{attrs:{"md-active":t.showMatching,"md-fullscreen":!1,"md-click-outside-to-close":!1,"md-close-on-esc":!1},on:{"update:mdActive":function(s){t.showMatching=s}}},[e("md-dialog-title",[t._v("正在寻找与你实力相当的对手……")]),t._v(" "),e("md-dialog-actions",[e("md-button",{staticClass:"md-primary",on:{click:function(s){t.cancelMatch()}}},[t._v("退出匹配")])],1)],1)],1)},G=[],W={apiRoot:"http://125.216.112.121:8083",socketRoot:"http://125.216.112.121:8001"},K=W,Z={components:{PersonCard:O},name:"topic-chosen",mounted:function(){var t=this;this.$http.post("/question/getCourseAndChapter").then(function(s){t.courses=s.filter(function(t){return t.chapters.length})}),this.matchRoom=d()("".concat(K.socketRoot,"/match")),this.matchRoom.on("success",function(s){-1!==s.userIds.map(function(t){return parseInt(t)}).findIndex(function(s){return s===t.$store.state.user.uid})&&t.matchingId&&(t.matchRoom.disconnect(),t.$router.push({path:"/battle",query:{roomId:s.roomId,chapterId:t.matchingId,chapterName:t.matchingName}}))})},beforeDestroy:function(){delete this.$options.sockets.success},methods:{startBattle:function(t,s){this.matchingId||(this.matchRoom.open(),this.matchRoom.emit("start",{userId:this.$store.state.user.uid,chapterId:t}),this.matchingId=t,this.matchingName=s,this.showMatching=!0)},cancelMatch:function(){this.matchRoom.emit("cancel",{userId:this.$store.state.user.uid,chapterId:this.matchingId}),this.matchingId="",this.matchingName="",this.showMatching=!1},goBack:function(){this.$router.back()}},data:function(){return{amount:50,courses:[],showDialog:!1,showMatching:!1,matchingId:"",matchingName:""}}},F=Z,L=(e("XDqd"),Object(g["a"])(F,J,G,!1,null,"6db5eb4a",null)),H=L.exports,tt=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",[n("div",{staticClass:"header md-layout md-alignment-center-left",on:{click:function(s){t.goBack()}}},[n("icon",{attrs:{name:"angle-left",scale:"2"}}),t._v(" "),n("span",{staticClass:"text"},[t._v("对战")])],1),t._v(" "),t.showingRecord?t._e():n("div",{staticClass:"battle md-elevation-2"},[n("div",{staticClass:"battle-header"},[t.me?n("div",{staticClass:"me"},[n("div",{staticClass:"avatar"},[n("md-avatar",{staticClass:"md-large"},[n("img",{attrs:{src:e("zwU1"),alt:"Avatar"}})])],1),t._v(" "),n("span",[t._v(t._s(t.me.userName))])]):t._e(),t._v(" "),n("div",{staticClass:"timer"},[n("div",{staticClass:"seconds"},[t._v(t._s(t.time)+"S")]),t._v(" "),n("div",{staticClass:"chapter"},[t._v(t._s(t.chapterName))])]),t._v(" "),t.opponent?n("div",{staticClass:"opponent"},[n("div",{staticClass:"avatar"},[n("md-avatar",{staticClass:"md-large"},[n("img",{attrs:{src:e("zwU1"),alt:"Avatar"}})])],1),t._v(" "),n("span",[t._v(t._s(t.opponent.userName))])]):t._e()]),t._v(" "),n("div",{staticClass:"md-layout"},[n("div",{staticClass:"counter"},[n("div",{staticClass:"bar"},[n("div",{staticClass:"fill",style:{height:20*t.myRightCount+"%"}})]),t._v(" "),n("div",[t._v(t._s(t.myRightCount)+"/5")])]),t._v(" "),n("div",{staticClass:"md-layout-item"},[n("p",{staticClass:"question"},[t._v(t._s(t.currentQuestion))]),t._v(" "),n("div",{staticClass:"answers"},t._l(t.currentOptions,function(s){return n("div",{staticClass:"answer-option md-elevation-1",on:{click:function(e){t.select(s)}}},[t._v(t._s(s.name)+": "+t._s(s.value))])}))]),t._v(" "),n("div",{staticClass:"counter"},[n("div",{staticClass:"bar"},[n("div",{staticClass:"fill",style:{height:20*t.opponentRightCount+"%"}})]),t._v(" "),n("div",[t._v(t._s(t.opponentRightCount)+"/5")])])])]),t._v(" "),t.showingRecord?n("div",{staticClass:"battle md-elevation-2"},[n("div",{staticClass:"battle-header"},[t.me?n("div",{staticClass:"me"},[n("div",{staticClass:"avatar"},[n("md-avatar",{staticClass:"md-large"},[n("img",{attrs:{src:e("zwU1"),alt:"Avatar"}})])],1),t._v(" "),n("span",[t._v(t._s(t.me.userName))])]):t._e(),t._v(" "),t._m(0),t._v(" "),t.opponent?n("div",{staticClass:"opponent"},[n("div",{staticClass:"avatar"},[n("md-avatar",{staticClass:"md-large"},[n("img",{attrs:{src:e("zwU1"),alt:"Avatar"}})])],1),t._v(" "),n("span",[t._v(t._s(t.opponent.userName))])]):t._e()]),t._v(" "),n("div",{staticClass:"md-layout"},[n("div",{staticClass:"switch",class:{hidden:0===t.currentRecordIndex},on:{click:function(s){t.switchRecord(-1)}}},[n("icon",{attrs:{name:"angle-left",scale:"2"}})],1),t._v(" "),n("div",{staticClass:"md-layout-item"},[n("p",{staticClass:"question"},[t._v(t._s(t.currentRecordQuestion))]),t._v(" "),t.currentRecordAnswer&&"no"!==t.currentRecordAnswer?t._e():n("p",{staticClass:"tips"},[t._v("本题未选择答案")]),t._v(" "),n("div",{staticClass:"answers"},t._l(t.currentRecordOptions,function(s){return n("div",{staticClass:"answer-option md-elevation-1",class:{correct:t.currentRecordAnswer===s.name&&t.currentRecordAnswer===t.currentRecordQuestionAnswer,error:t.currentRecordAnswer===s.name&&t.currentRecordAnswer!==t.currentRecordQuestionAnswer}},[t._v(t._s(s.name)+": "+t._s(s.value))])}))]),t._v(" "),n("div",{staticClass:"switch",class:{hidden:4===t.currentRecordIndex},on:{click:function(s){t.switchRecord(1)}}},[n("icon",{attrs:{name:"angle-right",scale:"2"}})],1)])]):t._e(),t._v(" "),n("md-snackbar",{attrs:{"md-position":"left","md-duration":1e3,"md-active":t.showSnackbar,"md-persistent":""},on:{"update:mdActive":function(s){t.showSnackbar=s}}},[n("span",[t._v(t._s(t.snackMsg))])]),t._v(" "),n("md-dialog",{attrs:{"md-active":t.waiting,"md-fullscreen":!1,"md-click-outside-to-close":!1,"md-close-on-esc":!1},on:{"update:mdActive":function(s){t.waiting=s}}},[n("md-dialog-title",[t._v(t._s(t.waitMsg))]),t._v(" "),n("md-dialog-actions",[n("md-button",{staticClass:"md-primary",on:{click:function(s){t.goBack()}}},[t._v("放弃比赛")])],1)],1),t._v(" "),n("md-dialog",{attrs:{"md-active":t.result,"md-fullscreen":!1,"md-click-outside-to-close":!1,"md-close-on-esc":!1},on:{"update:mdActive":function(s){t.result=s}}},[n("md-dialog-title",[t._v(t._s(t.resultMsg))]),t._v(" "),t.uploading?n("p",{staticClass:"uploading"},[t._v("结果上传中……")]):t._e(),t._v(" "),n("md-dialog-actions",[n("md-button",{staticClass:"md-primary",attrs:{disabled:t.uploading},on:{click:function(s){t.showRecord()}}},[t._v("查看本次对战回顾")])],1)],1)],1)},st=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"timer"},[e("div",{staticClass:"chapter"},[t._v("对战回顾")])])}],et=(e("dRSK"),{name:"battle",computed:{currentRecordAnswer:function(){var t=this;if(this.me&&this.me.answers&&this.questions&&this.questions[this.currentRecordIndex]){var s=this.me.answers.find(function(s){return s.questionId===t.questions[t.currentRecordIndex].questionId});if(s)return s.answer}return!1}},data:function(){return{second:10,me:null,opponent:null,roomId:"",chapterId:"",chapterName:"",waitMsg:"正在等待你的对手进入房间……",waiting:!0,currentQuestion:"",currentOptions:[],currentQuestionIndex:0,myRightCount:0,opponentRightCount:0,snackMsg:"",showSnackbar:!1,result:!1,resultMsg:"",uploading:!1,time:10,timer:null,isOver:!1,showingRecord:!1,currentRecordQuestion:"",currentRecordOptions:[],currentRecordQuestionAnswer:"",currentRecordIndex:0}},mounted:function(){var t=this,s=this.$router.currentRoute.query;this.roomId=s.roomId,this.chapterId=s.chapterId,this.chapterName=s.chapterName,this.questions=[];var e=d()("".concat(K.socketRoot,"/room/").concat(this.roomId));e.emit("ready",{userId:this.$store.state.user.uid,chapterId:this.chapterId}),e.on("begin",function(s){var e=s.playerOne,n=s.playerTwo,a=s.questions;console.log("begin"),parseInt(e.uid)===t.$store.state.user.uid?(t.me=e,t.opponent=n):(t.me=n,t.opponent=e),t.me.answers=[],t.opponent.answers=[],t.questions=a,t.currentQuestion=t.questions[t.currentQuestionIndex].question,t.currentOptions=t.questions[t.currentQuestionIndex].options,t.currentRecordQuestion=t.questions[t.currentRecordIndex].question,t.currentRecordOptions=t.questions[t.currentRecordIndex].options,t.currentRecordQuestionAnswer=t.questions[t.currentRecordIndex].answer,t.waiting=!1,t.startTimer()}),e.on("opponentAnswer",function(s){var e=s.questionId,n=s.answer;t.opponent.answers=t.opponent.answers||[],t.opponent.answers.push({questionId:e,answer:n});var a=t.questions.findIndex(function(t){return t.questionId===e});-1!==a&&t.questions[a].answer===n&&(t.opponentRightCount++,t.showSnackBarMethod("你的对手答对了一题！"))}),e.on("over",function(s){var n=s.opponentQuit,a=s.requestUserId;t.waiting&&(t.waiting=!1),!0===n?t.showQuitResult():t.showResult(),a===t.$store.state.user.uid&&(t.uploading=!0,t.$http.post("/brain/saveAnswers",{result:[{userId:t.me.uid,answers:t.me.answers},{userId:t.opponent.uid,answers:t.opponent.answers}]}).then(function(s){console.log("上传答案成功"),t.uploading=!1})),t.isOver=!0,e.disconnect(!0)}),this.playRoom=e},beforeDestroy:function(){this.isOver||(this.playRoom.emit("quit",{userId:this.$store.state.user.uid,chapterId:this.chapterId}),this.playRoom.disconnect(!0))},methods:{startTimer:function(){var t=this;this.timer&&window.clearInterval(this.timer),this.time=10,this.timer=window.setInterval(function(){t.time--,0===t.time&&(window.clearInterval(t.timer),t.select({name:"no"}))},1e3)},goBack:function(){this.$router.back()},showSnackBarMethod:function(t){this.snackMsg=t,this.showSnackbar=!0},showWaitingMethod:function(t){this.waitMsg=t,this.waiting=!0},showResult:function(){this.myRightCount>this.opponentRightCount?this.resultMsg="恭喜你战胜了 @".concat(this.opponent.userName,"。"):this.myRightCount<this.opponentRightCount?this.resultMsg="很遗憾你被 @".concat(this.opponent.userName," 打败了"):this.resultMsg="你跟 @".concat(this.opponent.userName," 握手言和"),this.result=!0},showQuitResult:function(){this.opponent&&(this.resultMsg="@".concat(this.opponent.userName," 落荒而逃，你赢得了比赛。"),this.result=!0)},select:function(t){this.me.answers=this.me.answers||[];var s={questionId:this.questions[this.currentQuestionIndex].questionId,answer:t.name};this.me.answers.push(s),this.playRoom.emit("answer",s),this.questions[this.currentQuestionIndex].answer===t.name&&(this.myRightCount++,this.showSnackBarMethod("你答对了~~")),this.currentQuestionIndex++,this.currentQuestionIndex<5?(this.currentQuestion=this.questions[this.currentQuestionIndex].question,this.currentOptions=this.questions[this.currentQuestionIndex].options,this.startTimer()):(this.playRoom.emit("finish",{userId:this.$store.state.user.uid}),this.showWaitingMethod("你已完成答题，请等待对手完成"),this.timer&&window.clearInterval(this.timer))},showRecord:function(){this.showingRecord=!0,this.result=!1},switchRecord:function(t){this.currentRecordIndex+=t,this.currentRecordQuestion=this.questions[this.currentRecordIndex].question,this.currentRecordOptions=this.questions[this.currentRecordIndex].options,this.currentRecordQuestionAnswer=this.questions[this.currentRecordIndex].answer}}}),nt=et,at=(e("Tm8U"),Object(g["a"])(nt,tt,st,!1,null,"c9a0ab4e",null)),it=at.exports,rt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"record"},[e("div",{staticClass:"header md-layout md-alignment-center-left",on:{click:function(s){t.goBack()}}},[e("icon",{attrs:{name:"angle-left",scale:"2"}}),t._v(" "),e("span",{staticClass:"text"},[t._v("战绩")])],1),t._v(" "),e("person-card"),t._v(" "),e("md-card",{staticStyle:{"over-flow":"auto",height:"58%","border-radius":"10px"}},[e("md-content",{staticClass:"record-stats md-layout md-alignment-center-space-around"},[e("div",{staticClass:"stat"},[e("div",{staticClass:"data"},[t._v(t._s(t.totalQuesstion))]),t._v(" "),e("div",{staticClass:"title"},[t._v("答题")])]),t._v(" "),e("div",{staticClass:"stat"},[e("div",{staticClass:"data"},[t._v(t._s(t.totalSession))]),t._v(" "),e("div",{staticClass:"title"},[t._v("总场次")])])]),t._v(" "),e("md-divider"),t._v(" "),e("md-table",[e("md-table-row",[e("md-table-head",{attrs:{"md-numeric":""}},[t._v("作答时间")]),t._v(" "),e("md-table-head",[t._v("题目名称")]),t._v(" "),e("md-table-head",[t._v("次数")])],1),t._v(" "),t._l(t.questionRecord,function(s){return e("md-table-row",[e("md-table-head",{attrs:{"md-numeric":""}},[t._v(t._s(t.moment.unix(parseInt(s.answertime)).fromNow()))]),t._v(" "),e("md-table-head",[t._v(t._s(s.question))]),t._v(" "),e("md-table-head",[t._v(t._s(s.count))])],1)})],2)],1)],1)},ot=[],ct={components:{PersonCard:O},name:"record",data:function(){return{questionRecord:[],totalQuesstion:"0",totalSession:"0",moment:l.a}},mounted:function(){var t=this;this.$http.post("/user/getUserGains",{uid:this.$store.state.user.uid}).then(function(s){t.questionRecord=s.questionRecord,t.totalQuesstion=s.totalQuesstion,t.totalSession=s.totalSession})},methods:{goBack:function(){this.$router.back()}}},dt=ct,ut=(e("VO+i"),Object(g["a"])(dt,rt,ot,!1,null,"9c9d53c4",null)),lt=ut.exports,mt=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"personal"},[n("div",{staticClass:"header md-layout md-alignment-center-left",on:{click:function(s){t.goBack()}}},[n("icon",{attrs:{name:"angle-left",scale:"2"}}),t._v(" "),n("span",{staticClass:"text"},[t._v("修改资料")])],1),t._v(" "),n("md-card",[n("md-card-content",[n("md-avatar",{staticClass:"md-large"},[n("img",{attrs:{src:e("zwU1"),alt:"Avatar"}})]),t._v(" "),n("div",{staticClass:"md-layout md-size-75 md-alignment-center"},[n("md-field",{staticClass:"md-layout-item md-size-75"},[n("label",[t._v("姓名")]),t._v(" "),n("md-input",{model:{value:t.nickname,callback:function(s){t.nickname=s},expression:"nickname"}})],1),t._v(" "),n("md-field",{staticClass:"md-layout-item md-size-75"},[n("label",[t._v("原密码")]),t._v(" "),n("md-input",{attrs:{type:"password"},model:{value:t.oldPassword,callback:function(s){t.oldPassword=s},expression:"oldPassword"}})],1),t._v(" "),n("md-field",{staticClass:"md-layout-item md-size-75"},[n("label",[t._v("新密码")]),t._v(" "),n("md-input",{attrs:{type:"password"},model:{value:t.newPassword,callback:function(s){t.newPassword=s},expression:"newPassword"}})],1),t._v(" "),n("md-button",{staticClass:"md-raised md-primary md-layout-item md-size-75",attrs:{disabled:!t.newPassword},on:{click:function(s){t.update()}}},[t._v("确认更改")])],1)],1),t._v(" "),n("md-snackbar",{attrs:{"md-position":"left","md-duration":2e3,"md-active":t.showSnack,"md-persistent":""},on:{"update:mdActive":function(s){t.showSnack=s}}},[n("span",[t._v(t._s(t.msg))])])],1)],1)},ht=[],pt={name:"personal",data:function(){return{oldPassword:"",newPassword:"",msg:"",showSnack:!1}},computed:{nickname:{get:function(){return this.$store.state.user.nickname},set:function(t){this.$store.commit("updateNickname",t)}}},methods:{update:function(){var t=this;this.newPassword&&this.$http.post("/user/update",{uid:this.$store.state.user.uid,nickname:this.nickname,oldPassword:this.oldPassword,newPassword:this.newPassword}).then(function(){t.msg="修改成功",t.showSnack=!0}).catch(function(s){t.msg=s.msg,t.showSnack=!0})},goBack:function(){this.$router.back()}}},vt=pt,ft=(e("ifuJ"),Object(g["a"])(vt,mt,ht,!1,null,"75e431ec",null)),_t=ft.exports,gt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"ranking"},[e("div",{staticClass:"header md-layout md-alignment-center-left",on:{click:function(s){t.goBack()}}},[e("icon",{attrs:{name:"angle-left",scale:"2"}}),t._v(" "),e("span",{staticClass:"text"},[t._v("排名")])],1),t._v(" "),e("person-card"),t._v(" "),e("md-card",[e("md-table",[t.myRanking&&1==parseInt(t.myRanking.rank)?e("md-table-row",{staticClass:"my-rank"},[e("md-table-head",{attrs:{"md-numeric":""}},[e("span",{staticClass:"first-rank-position"},[t._v(t._s(t.myRanking.rank))])]),t._v(" "),e("md-table-head",[e("span",{staticClass:"first-rank-content"},[t._v(t._s(t.myRanking.nickname))])]),t._v(" "),e("md-table-head",[e("span",{staticClass:"first-rank-content"},[t._v("答题数："+t._s(t.myRanking.totalQuesstion))])])],1):t.myRanking&&2==parseInt(t.myRanking.rank)?e("md-table-row",{staticClass:"my-rank"},[e("md-table-head",{attrs:{"md-numeric":""}},[e("span",{staticClass:"second-rank-position"},[t._v(t._s(t.myRanking.rank))])]),t._v(" "),e("md-table-head",[e("span",{staticClass:"second-rank-content"},[t._v(t._s(t.myRanking.nickname))])]),t._v(" "),e("md-table-head",[e("span",{staticClass:"second-rank-content"},[t._v("答题数："+t._s(t.myRanking.totalQuesstion))])])],1):t.myRanking&&3==parseInt(t.myRanking.rank)?e("md-table-row",{staticClass:"my-rank"},[e("md-table-head",{attrs:{"md-numeric":""}},[e("span",{staticClass:"third-rank-position"},[t._v(t._s(t.myRanking.rank))])]),t._v(" "),e("md-table-head",[e("span",{staticClass:"third-rank-content"},[t._v(t._s(t.myRanking.nickname))])]),t._v(" "),e("md-table-head",[e("span",{staticClass:"third-rank-content"},[t._v("答题数："+t._s(t.myRanking.totalQuesstion))])])],1):t.myRanking&&parseInt(t.myRanking.rank)>3?e("md-table-row",{staticClass:"my-rank"},[e("md-table-head",{attrs:{"md-numeric":""}},[e("span",{staticClass:"third-rank-position"},[t._v(t._s(t.myRanking.rank))])]),t._v(" "),e("md-table-head",[e("span",{staticClass:"third-rank-content"},[t._v(t._s(t.myRanking.nickname))])]),t._v(" "),e("md-table-head",[e("span",{staticClass:"third-rank-content"},[t._v("答题数："+t._s(t.myRanking.totalQuesstion))])])],1):t._e(),t._v(" "),t._l(t.theirRanking,function(s,n){return[e("md-table-row",0==n?[e("md-table-head",{attrs:{"md-numeric":""}},[e("span",{staticClass:"first-rank-position"},[t._v(t._s(s.rank))])]),t._v(" "),e("md-table-head",[e("span",{staticClass:"first-rank-content"},[t._v(t._s(s.nickname))])]),t._v(" "),e("md-table-head",[e("span",{staticClass:"first-rank-content"},[t._v("答题数："+t._s(s.totalQuesstion))])])]:1==n?[e("md-table-head",{attrs:{"md-numeric":""}},[e("span",{staticClass:"second-rank-position"},[t._v(t._s(s.rank))])]),t._v(" "),e("md-table-head",[e("span",{staticClass:"second-rank-content"},[t._v(t._s(s.nickname))])]),t._v(" "),e("md-table-head",[e("span",{staticClass:"second-rank-content"},[t._v("答题数："+t._s(s.totalQuesstion))])])]:2==n?[e("md-table-head",{attrs:{"md-numeric":""}},[e("span",{staticClass:"third-rank-position"},[t._v(t._s(s.rank))])]),t._v(" "),e("md-table-head",[e("span",{staticClass:"third-rank-content"},[t._v(t._s(s.nickname))])]),t._v(" "),e("md-table-head",[e("span",{staticClass:"third-rank-content"},[t._v("答题数："+t._s(s.totalQuesstion))])])]:[e("md-table-head",{attrs:{"md-numeric":""}},[e("span",{staticClass:"other-rank-position"},[t._v(t._s(s.rank))])]),t._v(" "),e("md-table-head",[e("span",{staticClass:"other-rank-content"},[t._v(t._s(s.nickname))])]),t._v(" "),e("md-table-head",[e("span",{staticClass:"other-rank-content"},[t._v("答题数："+t._s(s.totalQuesstion))])])],1)]})],2)],1)],1)},kt=[],wt={components:{PersonCard:O},name:"ranking",data:function(){return{myRanking:null,theirRanking:[]}},mounted:function(){var t=this;this.$http.post("/user/getRank",{uid:this.$store.state.user.uid}).then(function(s){t.myRanking=s.user,t.theirRanking=s.users})},methods:{goBack:function(){this.$router.back()}}},jt=wt,bt=(e("YwKj"),Object(g["a"])(jt,gt,kt,!1,null,"1047ed39",null)),Ct=bt.exports;n["default"].use(j["a"]);var yt=new j["a"]({routes:[{path:"/",name:"home",component:S},{path:"/login",name:"login",component:B},{path:"/register",name:"register",component:X},{path:"/personal",name:"personal",component:_t},{path:"/topic-chosen",name:"topic-chosen",component:H},{path:"/battle",name:"battle",component:it},{path:"/record",name:"record",component:lt},{path:"/ranking",name:"ranking",component:Ct}]}),Rt=e("DkTT"),It=e("xDdU"),xt=e.n(It);n["default"].use(v["a"]);var zt=new v["a"].Store({state:{user:null,mchId:""},mutations:{setUser:function(t,s){t.mchId=xt()(),t.user=s},logout:function(t){t.mchId="",t.user=null},updateNickname:function(t,s){t.user&&(t.user.nickname=s)}},actions:{},plugins:[Object(Rt["a"])({storage:window.sessionStorage})]}),Ot=e("vDqi"),Qt=e.n(Ot);Qt.a.defaults.baseURL=K.apiRoot,Qt.a.defaults.headers.post["Content-Type"]="application/json;charset=UTF-8",Qt.a.interceptors.response.use(function(t){return t},function(t){return console.log(t),Promise.reject(t)});var $t=function(t){console.log(t);var s=t.data,e=s.data,n=s.status;return 200!==parseInt(n)?Promise.reject(t.data):Promise.resolve(e)};n["default"].prototype.$http={get:function(t,s){return Qt.a.get(t,{params:s}).then($t)},post:function(t,s){return Qt.a.post(t,s).then($t)},put:function(t,s){return Qt.a.put(t,s).then($t)},del:function(t,s){return Qt.a.delete(t,{params:s}).then($t)}};l.a.locale("zh-cn");var qt=["/login","/register"];yt.beforeEach(function(t,s,e){zt.state.user||-1!==qt.indexOf(t.path)?e():e({path:"/login"})}),n["default"].config.productionTip=!1,n["default"].use(i.a),n["default"].use(o.a,d()(K.socketRoot)),n["default"].component("icon",m["a"]),new n["default"]({router:yt,store:zt,render:function(t){return t(w)}}).$mount("#app")},XDqd:function(t,s,e){"use strict";var n=e("3Th+"),a=e.n(n);a.a},XvsG:function(t,s,e){t.exports=e.p+"img/record_bg.1202e874.jpg"},YwKj:function(t,s,e){"use strict";var n=e("wr4o"),a=e.n(n);a.a},fnoW:function(t,s,e){},hhSi:function(t,s,e){"use strict";var n=e("J5I2"),a=e.n(n);a.a},ifuJ:function(t,s,e){"use strict";var n=e("nmWV"),a=e.n(n);a.a},nNx0:function(t,s,e){"use strict";var n=e("fnoW"),a=e.n(n);a.a},nmWV:function(t,s,e){},wr4o:function(t,s,e){},xaZR:function(t,s,e){"use strict";var n=e("y0md"),a=e.n(n);a.a},y0md:function(t,s,e){},zwU1:function(t,s,e){t.exports=e.p+"img/logo.0a52e065.png"}});
//# sourceMappingURL=app.a426d693.js.map