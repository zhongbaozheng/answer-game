(function(t){function s(s){for(var n,o,r=s[0],c=s[1],u=s[2],m=0,l=[];m<r.length;m++)o=r[m],a[o]&&l.push(a[o][0]),a[o]=0;for(n in c)Object.prototype.hasOwnProperty.call(c,n)&&(t[n]=c[n]);d&&d(s);while(l.length)l.shift()();return i.push.apply(i,u||[]),e()}function e(){for(var t,s=0;s<i.length;s++){for(var e=i[s],n=!0,r=1;r<e.length;r++){var c=e[r];0!==a[c]&&(n=!1)}n&&(i.splice(s--,1),t=o(o.s=e[0]))}return t}var n={},a={1:0},i=[];function o(s){if(n[s])return n[s].exports;var e=n[s]={i:s,l:!1,exports:{}};return t[s].call(e.exports,e,e.exports,o),e.l=!0,e.exports}o.m=t,o.c=n,o.d=function(t,s,e){o.o(t,s)||Object.defineProperty(t,s,{configurable:!1,enumerable:!0,get:e})},o.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},o.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(s,"a",s),s},o.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=s,r=r.slice();for(var u=0;u<r.length;u++)s(r[u]);var d=c;i.push([14,0]),e()})({"0ozd":function(t,s,e){"use strict";var n=e("E9RE"),a=e.n(n);a.a},13:function(t,s){},14:function(t,s,e){t.exports=e("Vtdi")},"3BI9":function(t,s,e){},"3Bn5":function(t,s,e){"use strict";var n=e("Hgsi"),a=e.n(n);a.a},"8Aew":function(t,s,e){"use strict";var n=e("v97J"),a=e.n(n);a.a},E9RE:function(t,s,e){},Hgsi:function(t,s,e){},JPWC:function(t,s,e){},RnhZ:function(t,s,e){var n={"./af":"K/tc","./af.js":"K/tc","./ar":"jnO4","./ar-dz":"o1bE","./ar-dz.js":"o1bE","./ar-kw":"Qj4J","./ar-kw.js":"Qj4J","./ar-ly":"HP3h","./ar-ly.js":"HP3h","./ar-ma":"CoRJ","./ar-ma.js":"CoRJ","./ar-sa":"gjCT","./ar-sa.js":"gjCT","./ar-tn":"bYM6","./ar-tn.js":"bYM6","./ar.js":"jnO4","./az":"SFxW","./az.js":"SFxW","./be":"H8ED","./be.js":"H8ED","./bg":"hKrs","./bg.js":"hKrs","./bm":"p/rL","./bm.js":"p/rL","./bn":"kEOa","./bn.js":"kEOa","./bo":"0mo+","./bo.js":"0mo+","./br":"aIdf","./br.js":"aIdf","./bs":"JVSJ","./bs.js":"JVSJ","./ca":"1xZ4","./ca.js":"1xZ4","./cs":"PA2r","./cs.js":"PA2r","./cv":"A+xa","./cv.js":"A+xa","./cy":"l5ep","./cy.js":"l5ep","./da":"DxQv","./da.js":"DxQv","./de":"tGlX","./de-at":"s+uk","./de-at.js":"s+uk","./de-ch":"u3GI","./de-ch.js":"u3GI","./de.js":"tGlX","./dv":"WYrj","./dv.js":"WYrj","./el":"jUeY","./el.js":"jUeY","./en-au":"Dmvi","./en-au.js":"Dmvi","./en-ca":"OIYi","./en-ca.js":"OIYi","./en-gb":"Oaa7","./en-gb.js":"Oaa7","./en-ie":"4dOw","./en-ie.js":"4dOw","./en-il":"czMo","./en-il.js":"czMo","./en-nz":"b1Dy","./en-nz.js":"b1Dy","./eo":"Zduo","./eo.js":"Zduo","./es":"iYuL","./es-do":"CjzT","./es-do.js":"CjzT","./es-us":"Vclq","./es-us.js":"Vclq","./es.js":"iYuL","./et":"7BjC","./et.js":"7BjC","./eu":"D/JM","./eu.js":"D/JM","./fa":"jfSC","./fa.js":"jfSC","./fi":"gekB","./fi.js":"gekB","./fo":"ByF4","./fo.js":"ByF4","./fr":"nyYc","./fr-ca":"2fjn","./fr-ca.js":"2fjn","./fr-ch":"Dkky","./fr-ch.js":"Dkky","./fr.js":"nyYc","./fy":"cRix","./fy.js":"cRix","./gd":"9rRi","./gd.js":"9rRi","./gl":"iEDd","./gl.js":"iEDd","./gom-latn":"DKr+","./gom-latn.js":"DKr+","./gu":"4MV3","./gu.js":"4MV3","./he":"x6pH","./he.js":"x6pH","./hi":"3E1r","./hi.js":"3E1r","./hr":"S6ln","./hr.js":"S6ln","./hu":"WxRl","./hu.js":"WxRl","./hy-am":"1rYy","./hy-am.js":"1rYy","./id":"UDhR","./id.js":"UDhR","./is":"BVg3","./is.js":"BVg3","./it":"bpih","./it.js":"bpih","./ja":"B55N","./ja.js":"B55N","./jv":"tUCv","./jv.js":"tUCv","./ka":"IBtZ","./ka.js":"IBtZ","./kk":"bXm7","./kk.js":"bXm7","./km":"6B0Y","./km.js":"6B0Y","./kn":"PpIw","./kn.js":"PpIw","./ko":"Ivi+","./ko.js":"Ivi+","./ky":"lgnt","./ky.js":"lgnt","./lb":"RAwQ","./lb.js":"RAwQ","./lo":"sp3z","./lo.js":"sp3z","./lt":"JvlW","./lt.js":"JvlW","./lv":"uXwI","./lv.js":"uXwI","./me":"KTz0","./me.js":"KTz0","./mi":"aIsn","./mi.js":"aIsn","./mk":"aQkU","./mk.js":"aQkU","./ml":"AvvY","./ml.js":"AvvY","./mn":"lYtQ","./mn.js":"lYtQ","./mr":"Ob0Z","./mr.js":"Ob0Z","./ms":"6+QB","./ms-my":"ZAMP","./ms-my.js":"ZAMP","./ms.js":"6+QB","./mt":"G0Uy","./mt.js":"G0Uy","./my":"honF","./my.js":"honF","./nb":"bOMt","./nb.js":"bOMt","./ne":"OjkT","./ne.js":"OjkT","./nl":"+s0g","./nl-be":"2ykv","./nl-be.js":"2ykv","./nl.js":"+s0g","./nn":"uEye","./nn.js":"uEye","./pa-in":"8/+R","./pa-in.js":"8/+R","./pl":"jVdC","./pl.js":"jVdC","./pt":"8mBD","./pt-br":"0tRk","./pt-br.js":"0tRk","./pt.js":"8mBD","./ro":"lyxo","./ro.js":"lyxo","./ru":"lXzo","./ru.js":"lXzo","./sd":"Z4QM","./sd.js":"Z4QM","./se":"//9w","./se.js":"//9w","./si":"7aV9","./si.js":"7aV9","./sk":"e+ae","./sk.js":"e+ae","./sl":"gVVK","./sl.js":"gVVK","./sq":"yPMs","./sq.js":"yPMs","./sr":"zx6S","./sr-cyrl":"E+lV","./sr-cyrl.js":"E+lV","./sr.js":"zx6S","./ss":"Ur1D","./ss.js":"Ur1D","./sv":"X709","./sv.js":"X709","./sw":"dNwA","./sw.js":"dNwA","./ta":"PeUW","./ta.js":"PeUW","./te":"XLvN","./te.js":"XLvN","./tet":"V2x9","./tet.js":"V2x9","./tg":"Oxv6","./tg.js":"Oxv6","./th":"EOgW","./th.js":"EOgW","./tl-ph":"Dzi0","./tl-ph.js":"Dzi0","./tlh":"z3Vd","./tlh.js":"z3Vd","./tr":"DoHr","./tr.js":"DoHr","./tzl":"z1FC","./tzl.js":"z1FC","./tzm":"wQk9","./tzm-latn":"tT3J","./tzm-latn.js":"tT3J","./tzm.js":"wQk9","./ug-cn":"YRex","./ug-cn.js":"YRex","./uk":"raLr","./uk.js":"raLr","./ur":"UpQW","./ur.js":"UpQW","./uz":"Loxo","./uz-latn":"AQ68","./uz-latn.js":"AQ68","./uz.js":"Loxo","./vi":"KSF8","./vi.js":"KSF8","./x-pseudo":"/X5v","./x-pseudo.js":"/X5v","./yo":"fzPg","./yo.js":"fzPg","./zh-cn":"XDpg","./zh-cn.js":"XDpg","./zh-hk":"SatO","./zh-hk.js":"SatO","./zh-tw":"kOpN","./zh-tw.js":"kOpN"};function a(t){var s=i(t),n=e(s);return n}function i(t){var s=n[t];if(!(s+1)){var e=new Error('Cannot find module "'+t+'".');throw e.code="MODULE_NOT_FOUND",e}return s}a.keys=function(){return Object.keys(n)},a.resolve=i,t.exports=a,a.id="RnhZ"},TFth:function(t,s,e){},VcSL:function(t,s,e){"use strict";var n=e("JPWC"),a=e.n(n);a.a},Vtdi:function(t,s,e){"use strict";e.r(s);e("VRzm");var n=e("Kw5r"),a=e("Q/mQ"),i=e.n(a),o=e("ChK9"),r=e.n(o),c=e("gFX4"),u=e.n(c),d=e("wd/R"),m=e.n(d),l=(e("Ud79"),e("4JRs"),e("0G0I"),e("CHRH")),h=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"md-layout md-alignment-center-center",attrs:{id:"app"}},[e("router-view",{staticClass:"md-layout-item md-small-size-100 md-size-50"})],1)},p=[],v=(e("f3/d"),e("INYr"),e("pIFo"),e("L2JU")),f={name:"app",computed:Object(v["b"])({user:function(t){return t.user},mchId:function(t){return t.mchId}}),mounted:function(){var t=this;this.user&&this.$socket.emit("online",{userId:this.user.uid,mchId:this.mchId}),this.$watch("user",function(){t.user?t.$socket.emit("online",{userId:t.user.uid,mchId:t.mchId}):t.$router.replace("/login")}),this.$socket.on("connect",function(){t.user&&t.$socket.emit("online",{userId:t.user.uid,mchId:t.mchId})}),this.$socket.on("logout",function(s){var e=s.userId,n=s.mchId;t.user&&t.user.uid===e&&t.mchId!==n&&t.$store.commit("logout")}),this.$socket.on("fight",function(s){var e=s.userIds,n=s.chapterId,a=s.roomId,i=s.chapterName;-1!==e.map(function(t){return parseInt(t)}).findIndex(function(s){return s===t.user.uid})&&("battle"===t.$router.currentRoute.name?t.$router.replace({path:"/battle",query:{roomId:a,chapterId:n,chapterName:i}}):t.$router.push({path:"/battle",query:{roomId:a,chapterId:n,chapterName:i}}))})}},g=f,_=(e("nNx0"),e("KHd+")),k=Object(_["a"])(g,h,p,!1,null,null,null),j=k.exports,w=e("jE9Z"),b=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"home"},[t._m(0),t._v(" "),e("person-card"),t._v(" "),e("md-button",{staticClass:"md-raised md-primary link",attrs:{to:"/topic-chosen"}},[t._v("双人对战")]),t._v(" "),e("md-button",{staticClass:"md-raised md-primary link",attrs:{to:"/record"}},[t._v("战绩")]),t._v(" "),e("md-button",{staticClass:"md-raised md-primary link",attrs:{to:"/ranking"}},[t._v("排名")])],1)},y=[function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"md-layout"},[e("div",[t._v("通信工知识竞技对战平台")])])}],C=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("md-card",{staticClass:"md-primary"},[n("md-card-content",[n("md-avatar",{staticClass:"md-large"},[n("img",{attrs:{src:e("zwU1"),alt:"Avatar"}})]),t._v(" "),n("div",{staticClass:"name"},[t._v(t._s(t.user.nickname))])],1),t._v(" "),n("md-card-actions",[n("md-button",{attrs:{to:"/personal"}},[t._v("修改资料")]),t._v(" "),n("md-button",{staticClass:"md-accent md-raised",on:{click:function(s){t.logout()}}},[t._v("退出登录")])],1)],1)},I=[],x={name:"person-card",computed:Object(v["b"])({user:function(t){return t.user}}),data:function(){return{amount:50}},methods:{logout:function(){this.$store.commit("logout")}}},R=x,z=(e("fXTD"),Object(_["a"])(R,C,I,!1,null,"adf373ae",null)),O=z.exports,$={components:{PersonCard:O},name:"home"},S=$,Q=(e("VcSL"),Object(_["a"])(S,b,y,!1,null,"37c2a297",null)),M=Q.exports,B=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("md-card",[e("md-card-header",[e("div",{staticClass:"md-title"},[t._v("登录")])]),t._v(" "),e("md-card-content",[e("div",{staticClass:"md-layout md-size-75 md-alignment-center"},[e("md-field",{staticClass:"md-layout-item md-size-75"},[e("label",[t._v("昵称")]),t._v(" "),e("md-input",{model:{value:t.nickname,callback:function(s){t.nickname=s},expression:"nickname"}})],1),t._v(" "),e("md-field",{staticClass:"md-layout-item md-size-75"},[e("label",[t._v("密码")]),t._v(" "),e("md-input",{attrs:{type:"password"},model:{value:t.password,callback:function(s){t.password=s},expression:"password"}})],1),t._v(" "),e("md-button",{staticClass:"md-raised md-primary md-layout-item md-size-75",attrs:{disabled:!t.nickname||!t.password},on:{click:function(s){t.login()}}},[t._v("登录")]),t._v(" "),e("md-button",{staticClass:"md-flat md-primary md-layout-item md-size-75",attrs:{to:"/register"}},[t._v("尚未注册？")])],1)]),t._v(" "),e("md-snackbar",{attrs:{"md-position":"left","md-duration":2e3,"md-active":t.showSnack,"md-persistent":""},on:{"update:mdActive":function(s){t.showSnack=s}}},[e("span",[t._v(t._s(t.msg))])])],1)},P=[],q={name:"login",data:function(){return{nickname:"",password:"",msg:"",showSnack:!1}},methods:{login:function(){var t=this;this.$http.post("/user/login",{nickname:this.nickname,password:this.password}).then(function(s){t.$store.commit("setUser",s),t.$router.replace("/")}).catch(function(s){t.msg=s.msg,t.showSnack=!0})}}},D=q,E=(e("qBfd"),Object(_["a"])(D,B,P,!1,null,"32011e03",null)),N=E.exports,U=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("md-card",[e("md-card-header",[e("div",{staticClass:"md-title"},[t._v("注册")])]),t._v(" "),e("md-card-content",[e("div",{staticClass:"md-layout md-size-75 md-alignment-center"},[e("md-field",{staticClass:"md-layout-item md-size-75"},[e("label",[t._v("昵称")]),t._v(" "),e("md-input",{model:{value:t.nickname,callback:function(s){t.nickname=s},expression:"nickname"}})],1),t._v(" "),e("md-field",{staticClass:"md-layout-item md-size-75"},[e("label",[t._v("密码")]),t._v(" "),e("md-input",{attrs:{type:"password"},model:{value:t.password,callback:function(s){t.password=s},expression:"password"}})],1),t._v(" "),e("md-button",{staticClass:"md-raised md-primary md-layout-item md-size-75",attrs:{disabled:!t.nickname||!t.password},on:{click:function(s){t.register()}}},[t._v("注册")]),t._v(" "),e("md-button",{staticClass:"md-flat md-primary md-layout-item md-size-75",attrs:{to:"/login"}},[t._v("已有账号？")])],1)]),t._v(" "),e("md-snackbar",{attrs:{"md-position":"left","md-duration":2e3,"md-active":t.showSnack,"md-persistent":""},on:{"update:mdActive":function(s){t.showSnack=s}}},[e("span",[t._v(t._s(t.msg))])])],1)},A=[],T={name:"register",data:function(){return{nickname:"",password:"",showSnack:!1,msg:""}},methods:{register:function(){var t=this;this.$http.post("/user/save",{nickname:this.nickname,password:this.password}).then(function(s){t.msg="注册成功，即将跳转至登录页面…",t.showSnack=!0,window.setTimeout(function(){t.$router.push("/login")},2e3)}).catch(function(s){t.msg=s.msg,t.showSnack=!0})}}},V=T,Y=(e("0ozd"),Object(_["a"])(V,U,A,!1,null,"0b7e0448",null)),J=Y.exports,X=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"topic-chosen"},[e("div",{staticClass:"header md-layout md-alignment-center-left",on:{click:function(s){t.goBack()}}},[e("icon",{attrs:{name:"angle-left",scale:"2"}}),t._v(" "),e("span",{staticClass:"text"},[t._v("双人对战")])],1),t._v(" "),e("person-card"),t._v(" "),e("md-list",{staticClass:"md-elevation-2"},t._l(t.courses,function(s){return e("md-list-item",{key:s.courseId,attrs:{"md-expand":""}},[e("span",{staticClass:"md-list-item-text"},[t._v(t._s(s.course))]),t._v(" "),e("md-list",{attrs:{slot:"md-expand"},slot:"md-expand"},t._l(s.chapters,function(s){return e("md-list-item",{key:s.chapterId,staticClass:"md-inset",on:{click:function(e){t.startBattle(s.chapterId,s.chapter)}}},[t._v(t._s(s.chapter))])}))],1)})),t._v(" "),e("md-dialog",{attrs:{"md-active":t.showMatching},on:{"update:mdActive":function(s){t.showMatching=s}}},[e("md-dialog-title",[t._v("正在寻找与你实力相当的对手……")]),t._v(" "),e("md-dialog-actions",[e("md-button",{staticClass:"md-primary",on:{click:function(s){t.cancelMatch()}}},[t._v("退出匹配")])],1)],1)],1)},W=[],K={apiRoot:"http://125.216.112.121:8083",socketRoot:"http://125.216.112.121:8001"},F=K,L={components:{PersonCard:O},name:"topic-chosen",mounted:function(){var t=this;this.$http.post("/question/getCourseAndChapter").then(function(s){t.courses=s.filter(function(t){return t.chapters.length})}),this.matchRoom=u()("".concat(F.socketRoot,"/match")),this.matchRoom.on("success",function(s){console.log(t.matchingId),-1!==s.userIds.map(function(t){return parseInt(t)}).findIndex(function(s){return s===t.$store.state.user.uid})&&t.matchingId&&(t.matchRoom.disconnect(),t.$router.push({path:"/battle",query:{roomId:s.roomId,chapterId:t.matchingId,chapterName:t.matchingName}}))})},beforeDestroy:function(){delete this.$options.sockets.success},methods:{startBattle:function(t,s){console.log(t),this.matchingId||(this.matchRoom.open(),this.matchRoom.emit("start",{userId:this.$store.state.user.uid,chapterId:t}),this.matchingId=t,this.matchingName=s,this.showMatching=!0)},cancelMatch:function(){this.matchRoom.emit("cancel",{userId:this.$store.state.user.uid,chapterId:this.matchingId}),this.matchingId="",this.matchingName="",this.showMatching=!1},goBack:function(){this.$router.back()}},data:function(){return{amount:50,courses:[],showDialog:!1,showMatching:!1,matchingId:"",matchingName:""}}},Z=L,H=(e("em4K"),Object(_["a"])(Z,X,W,!1,null,"89bec558",null)),G=H.exports,tt=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",[n("div",{staticClass:"header md-layout md-alignment-center-left",on:{click:function(s){t.goBack()}}},[n("icon",{attrs:{name:"angle-left",scale:"2"}}),t._v(" "),n("span",{staticClass:"text"},[t._v("对战")])],1),t._v(" "),n("div",{staticClass:"battle md-elevation-2"},[n("div",{staticClass:"battle-header"},[t.me?n("div",{staticClass:"me"},[n("div",{staticClass:"avatar"},[n("md-avatar",{staticClass:"md-large"},[n("img",{attrs:{src:e("zwU1"),alt:"Avatar"}})])],1),t._v(" "),n("span",[t._v(t._s(t.me.userName))])]):t._e(),t._v(" "),n("div",{staticClass:"timer"},[n("div",{staticClass:"seconds"},[t._v(t._s(t.time)+"S")]),t._v(" "),n("div",{staticClass:"chapter"},[t._v(t._s(t.chapterName))])]),t._v(" "),t.opponent?n("div",{staticClass:"opponent"},[n("div",{staticClass:"avatar"},[n("md-avatar",{staticClass:"md-large"},[n("img",{attrs:{src:e("zwU1"),alt:"Avatar"}})])],1),t._v(" "),n("span",[t._v(t._s(t.opponent.userName))])]):t._e()]),t._v(" "),n("div",{staticClass:"md-layout"},[n("div",{staticClass:"counter"},[n("div",{staticClass:"bar"},[n("div",{staticClass:"fill",style:{height:20*t.myRightCount+"%"}})]),t._v(" "),n("div",[t._v(t._s(t.myRightCount)+"/5")])]),t._v(" "),n("div",{staticClass:"md-layout-item"},[[n("p",{staticClass:"question"},[t._v(t._s(t.currentQuestion))]),t._v(" "),n("div",{staticClass:"answers"},t._l(t.currentOptions,function(s){return n("md-button",{staticClass:"md-raised",on:{click:function(e){t.select(s)}}},[t._v(t._s(s.name)+": "+t._s(s.value))])}))]],2),t._v(" "),n("div",{staticClass:"counter"},[n("div",{staticClass:"bar"},[n("div",{staticClass:"fill",style:{height:20*t.opponentRightCount+"%"}})]),t._v(" "),n("div",[t._v(t._s(t.opponentRightCount)+"/5")])])])]),t._v(" "),n("md-snackbar",{attrs:{"md-position":"left","md-duration":1e3,"md-active":t.showSnackbar,"md-persistent":""},on:{"update:mdActive":function(s){t.showSnackbar=s}}},[n("span",[t._v(t._s(t.snackMsg))])]),t._v(" "),n("md-dialog",{attrs:{"md-active":t.waiting},on:{"update:mdActive":function(s){t.waiting=s}}},[n("md-dialog-title",[t._v(t._s(t.waitMsg))]),t._v(" "),n("md-dialog-actions",[n("md-button",{staticClass:"md-primary",on:{click:function(s){t.goBack()}}},[t._v("放弃比赛")])],1)],1),t._v(" "),n("md-dialog",{attrs:{"md-active":t.result},on:{"update:mdActive":function(s){t.result=s}}},[n("md-dialog-title",[t._v(t._s(t.resultMsg))]),t._v(" "),t.uploading?n("p",{staticClass:"uploading"},[t._v("结果上传中……")]):t._e(),t._v(" "),n("md-dialog-actions",[n("md-button",{staticClass:"md-primary",attrs:{disabled:t.uploading},on:{click:function(s){t.goBack()}}},[t._v("返回")])],1)],1)],1)},st=[],et={name:"battle",data:function(){return{second:10,me:null,opponent:null,roomId:"",chapterId:"",chapterName:"",waitMsg:"正在等待你的对手进入房间……",waiting:!0,currentQuestion:"",currentOptions:[],currentQuestionIndex:0,myRightCount:0,opponentRightCount:0,snackMsg:"",showSnackbar:!1,result:!1,resultMsg:"",uploading:!1,time:10,timer:null,isOver:!1}},mounted:function(){var t=this,s=this.$router.currentRoute.query;this.roomId=s.roomId,this.chapterId=s.chapterId,this.chapterName=s.chapterName,this.questions=[];var e=u()("".concat(F.socketRoot,"/room/").concat(this.roomId));e.emit("ready",{userId:this.$store.state.user.uid,chapterId:this.chapterId}),e.on("begin",function(s){var e=s.playerOne,n=s.playerTwo,a=s.questions;parseInt(e.uid)===t.$store.state.user.uid?(t.me=e,t.opponent=n):(t.me=n,t.opponent=e),t.me.answers=[],t.opponent.answers=[],t.questions=a,t.currentQuestion=t.questions[t.currentQuestionIndex].question,t.currentOptions=t.questions[t.currentQuestionIndex].options,t.waiting=!1,t.startTimer()}),e.on("opponentAnswer",function(s){var e=s.questionId,n=s.answer;t.opponent.answers=t.opponent.answers||[],t.opponent.answers.push({questionId:e,answer:n});var a=t.questions.findIndex(function(t){return t.questionId===e});-1!==a&&t.questions[a].answer===n&&(t.opponentRightCount++,t.showSnackBarMethod("你的对手答对了一题！"))}),e.on("over",function(s){var n=s.opponentQuit,a=s.requestUserId;t.waiting&&(t.waiting=!1),!0===n?t.showQuitResult():t.showResult(),a===t.$store.state.user.uid&&(t.uploading=!0,t.$http.post("/brain/saveAnswers",{result:[{userId:t.me.uid,answers:t.me.answers.filter(function(t){return"TimeOut"!==t.answer})},{userId:t.opponent.uid,answers:t.opponent.answers.filter(function(t){return"TimeOut"!==t.answer})}]}).then(function(s){t.uploading=!1})),t.isOver=!0,e.disconnect(!0)}),this.playRoom=e},beforeDestroy:function(){this.isOver||(this.playRoom.emit("quit",{userId:this.$store.state.user.uid,chapterId:this.chapterId}),this.playRoom.disconnect(!0))},methods:{startTimer:function(){var t=this;this.timer&&window.clearInterval(this.timer),this.time=10,this.timer=window.setInterval(function(){t.time--,0===t.time&&(window.clearInterval(t.timer),t.select({name:"TimeOut"}))},1e3)},goBack:function(){this.$router.back()},showSnackBarMethod:function(t){this.snackMsg=t,this.showSnackbar=!0},showWaitingMethod:function(t){this.waitMsg=t,this.waiting=!0},showResult:function(){this.myRightCount>this.opponentRightCount?this.resultMsg="恭喜你战胜了 @".concat(this.opponent.userName,"。"):this.myRightCount<this.opponentRightCount?this.resultMsg="很遗憾你被 @".concat(this.opponent.userName," 打败了"):this.resultMsg="你跟 @".concat(this.opponent.userName," 握手言和"),this.result=!0},showQuitResult:function(){this.opponent&&(this.resultMsg="@".concat(this.opponent.userName," 落荒而逃，你赢得了比赛。"),this.result=!0)},select:function(t){this.me.answers=this.me.answers||[];var s={questionId:this.questions[this.currentQuestionIndex].questionId,answer:t.name};this.me.answers.push(s),this.playRoom.emit("answer",s),this.questions[this.currentQuestionIndex].answer===t.name&&(this.myRightCount++,this.showSnackBarMethod("你答对了~~")),this.currentQuestionIndex++,this.currentQuestionIndex<5?(this.currentQuestion=this.questions[this.currentQuestionIndex].question,this.currentOptions=this.questions[this.currentQuestionIndex].options,this.startTimer()):(this.playRoom.emit("finish",{userId:this.$store.state.user.uid}),this.showWaitingMethod("你已完成答题，请等待对手完成"),this.timer&&window.clearInterval(this.timer))}}},nt=et,at=(e("h/fh"),Object(_["a"])(nt,tt,st,!1,null,"5dda71b0",null)),it=at.exports,ot=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"record"},[e("div",{staticClass:"header md-layout md-alignment-center-left",on:{click:function(s){t.goBack()}}},[e("icon",{attrs:{name:"angle-left",scale:"2"}}),t._v(" "),e("span",{staticClass:"text"},[t._v("战绩")])],1),t._v(" "),e("person-card"),t._v(" "),e("md-card",[e("md-content",{staticClass:"record-stats md-layout md-alignment-center-space-around"},[e("div",{staticClass:"stat"},[e("div",{staticClass:"data"},[t._v(t._s(t.totalQuesstion))]),t._v(" "),e("div",{staticClass:"title"},[t._v("答题")])]),t._v(" "),e("div",{staticClass:"stat"},[e("div",{staticClass:"data"},[t._v(t._s(t.totalSession))]),t._v(" "),e("div",{staticClass:"title"},[t._v("总场次")])])]),t._v(" "),e("md-divider"),t._v(" "),e("md-table",[e("md-table-row",[e("md-table-head",{attrs:{"md-numeric":""}},[t._v("作答时间")]),t._v(" "),e("md-table-head",[t._v("题目名称")]),t._v(" "),e("md-table-head",[t._v("次数")])],1),t._v(" "),t._l(t.questionRecord,function(s){return e("md-table-row",[e("md-table-head",{attrs:{"md-numeric":""}},[t._v(t._s(t.moment.unix(parseInt(s.answertime)).fromNow()))]),t._v(" "),e("md-table-head",[t._v(t._s(s.question))]),t._v(" "),e("md-table-head",[t._v(t._s(s.count))])],1)})],2)],1)],1)},rt=[],ct={components:{PersonCard:O},name:"record",data:function(){return{questionRecord:[],totalQuesstion:"0",totalSession:"0",moment:m.a}},mounted:function(){var t=this;this.$http.post("/user/getUserGains",{uid:this.$store.state.user.uid}).then(function(s){t.questionRecord=s.questionRecord,t.totalQuesstion=s.totalQuesstion,t.totalSession=s.totalSession})},methods:{goBack:function(){this.$router.back()}}},ut=ct,dt=(e("3Bn5"),Object(_["a"])(ut,ot,rt,!1,null,"a548eb42",null)),mt=dt.exports,lt=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"personal"},[n("div",{staticClass:"header md-layout md-alignment-center-left",on:{click:function(s){t.goBack()}}},[n("icon",{attrs:{name:"angle-left",scale:"2"}}),t._v(" "),n("span",{staticClass:"text"},[t._v("修改资料")])],1),t._v(" "),n("md-card",[n("md-card-content",[n("md-avatar",{staticClass:"md-large"},[n("img",{attrs:{src:e("zwU1"),alt:"Avatar"}})]),t._v(" "),n("div",{staticClass:"md-layout md-size-75 md-alignment-center"},[n("md-field",{staticClass:"md-layout-item md-size-75"},[n("label",[t._v("姓名")]),t._v(" "),n("md-input",{model:{value:t.nickname,callback:function(s){t.nickname=s},expression:"nickname"}})],1),t._v(" "),n("md-field",{staticClass:"md-layout-item md-size-75"},[n("label",[t._v("原密码")]),t._v(" "),n("md-input",{attrs:{type:"password"},model:{value:t.oldPassword,callback:function(s){t.oldPassword=s},expression:"oldPassword"}})],1),t._v(" "),n("md-field",{staticClass:"md-layout-item md-size-75"},[n("label",[t._v("新密码")]),t._v(" "),n("md-input",{attrs:{type:"password"},model:{value:t.newPassword,callback:function(s){t.newPassword=s},expression:"newPassword"}})],1),t._v(" "),n("md-button",{staticClass:"md-raised md-primary md-layout-item md-size-75",attrs:{disabled:!t.newPassword},on:{click:function(s){t.update()}}},[t._v("确认更改")])],1)],1),t._v(" "),n("md-snackbar",{attrs:{"md-position":"left","md-duration":2e3,"md-active":t.showSnack,"md-persistent":""},on:{"update:mdActive":function(s){t.showSnack=s}}},[n("span",[t._v(t._s(t.msg))])])],1)],1)},ht=[],pt={name:"personal",data:function(){return{oldPassword:"",newPassword:"",msg:"",showSnack:!1}},computed:{nickname:{get:function(){return this.$store.state.user.nickname},set:function(t){this.$store.commit("updateNickname",t)}}},methods:{update:function(){var t=this;this.newPassword&&this.$http.post("/user/update",{uid:this.$store.state.user.uid,nickname:this.nickname,oldPassword:this.oldPassword,newPassword:this.newPassword}).then(function(){t.msg="修改成功",t.showSnack=!0}).catch(function(s){t.msg=s.msg,t.showSnack=!0})},goBack:function(){this.$router.back()}}},vt=pt,ft=(e("8Aew"),Object(_["a"])(vt,lt,ht,!1,null,"730b80e4",null)),gt=ft.exports,_t=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"ranking"},[e("div",{staticClass:"header md-layout md-alignment-center-left",on:{click:function(s){t.goBack()}}},[e("icon",{attrs:{name:"angle-left",scale:"2"}}),t._v(" "),e("span",{staticClass:"text"},[t._v("排名")])],1),t._v(" "),e("person-card"),t._v(" "),e("md-card",[e("md-table",[t.myRanking?e("md-table-row",[e("md-table-head",{attrs:{"md-numeric":""}},[t._v(t._s(t.myRanking.rank))]),t._v(" "),e("md-table-head",[t._v(t._s(t.myRanking.nickname))]),t._v(" "),e("md-table-head",[t._v("答题数："+t._s(t.myRanking.totalQuesstion))])],1):t._e(),t._v(" "),t._l(t.theirRanking,function(s){return e("md-table-row",[e("md-table-head",{attrs:{"md-numeric":""}},[t._v(t._s(s.rank))]),t._v(" "),e("md-table-head",[t._v(t._s(s.nickname))]),t._v(" "),e("md-table-head",[t._v("答题数："+t._s(s.totalQuesstion))])],1)})],2)],1)],1)},kt=[],jt={components:{PersonCard:O},name:"ranking",data:function(){return{myRanking:null,theirRanking:[]}},mounted:function(){var t=this;this.$http.post("/user/getRank",{uid:this.$store.state.user.uid}).then(function(s){t.myRanking=s.user,t.theirRanking=s.users})},methods:{goBack:function(){this.$router.back()}}},wt=jt,bt=(e("qCoX"),Object(_["a"])(wt,_t,kt,!1,null,"8427b8f0",null)),yt=bt.exports;n["default"].use(w["a"]);var Ct=new w["a"]({routes:[{path:"/",name:"home",component:M},{path:"/login",name:"login",component:N},{path:"/register",name:"register",component:J},{path:"/personal",name:"personal",component:gt},{path:"/topic-chosen",name:"topic-chosen",component:G},{path:"/battle",name:"battle",component:it},{path:"/record",name:"record",component:mt},{path:"/ranking",name:"ranking",component:yt}]}),It=e("DkTT"),xt=e("xDdU"),Rt=e.n(xt);n["default"].use(v["a"]);var zt=new v["a"].Store({state:{user:null,mchId:""},mutations:{setUser:function(t,s){t.mchId=Rt()(),t.user=s},logout:function(t){t.mchId="",t.user=null},updateNickname:function(t,s){t.user&&(t.user.nickname=s)}},actions:{},plugins:[Object(It["a"])({storage:window.sessionStorage})]}),Ot=e("vDqi"),$t=e.n(Ot);$t.a.defaults.baseURL=F.apiRoot,$t.a.defaults.headers.post["Content-Type"]="application/json;charset=UTF-8",$t.a.interceptors.response.use(function(t){return t},function(t){return console.log(t),Promise.reject(t)});var St=function(t){console.log(t);var s=t.data,e=s.data,n=s.status;return 200!==parseInt(n)?Promise.reject(t.data):Promise.resolve(e)};n["default"].prototype.$http={get:function(t,s){return $t.a.get(t,{params:s}).then(St)},post:function(t,s){return $t.a.post(t,s).then(St)},put:function(t,s){return $t.a.put(t,s).then(St)},del:function(t,s){return $t.a.delete(t,{params:s}).then(St)}};m.a.locale("zh-cn");var Qt=["/login","/register"];Ct.beforeEach(function(t,s,e){zt.state.user||-1!==Qt.indexOf(t.path)?e():e({path:"/login"})}),n["default"].config.productionTip=!1,n["default"].use(i.a),n["default"].use(r.a,u()(F.socketRoot)),n["default"].component("icon",l["a"]),new n["default"]({router:Ct,store:zt,render:function(t){return t(j)}}).$mount("#app")},dTSx:function(t,s,e){},em4K:function(t,s,e){"use strict";var n=e("3BI9"),a=e.n(n);a.a},fXTD:function(t,s,e){"use strict";var n=e("dTSx"),a=e.n(n);a.a},fnoW:function(t,s,e){},"h/fh":function(t,s,e){"use strict";var n=e("TFth"),a=e.n(n);a.a},nNx0:function(t,s,e){"use strict";var n=e("fnoW"),a=e.n(n);a.a},qBfd:function(t,s,e){"use strict";var n=e("z6f5"),a=e.n(n);a.a},qCoX:function(t,s,e){"use strict";var n=e("vVEf"),a=e.n(n);a.a},v97J:function(t,s,e){},vVEf:function(t,s,e){},z6f5:function(t,s,e){},zwU1:function(t,s,e){t.exports=e.p+"img/logo.0a52e065.png"}});
//# sourceMappingURL=app.f40583c5.js.map