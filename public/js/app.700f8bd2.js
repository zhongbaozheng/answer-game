(function(t){function s(s){for(var e,o,r=s[0],c=s[1],d=s[2],m=0,l=[];m<r.length;m++)o=r[m],a[o]&&l.push(a[o][0]),a[o]=0;for(e in c)Object.prototype.hasOwnProperty.call(c,e)&&(t[e]=c[e]);u&&u(s);while(l.length)l.shift()();return i.push.apply(i,d||[]),n()}function n(){for(var t,s=0;s<i.length;s++){for(var n=i[s],e=!0,r=1;r<n.length;r++){var c=n[r];0!==a[c]&&(e=!1)}e&&(i.splice(s--,1),t=o(o.s=n[0]))}return t}var e={},a={1:0},i=[];function o(s){if(e[s])return e[s].exports;var n=e[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=e,o.d=function(t,s,n){o.o(t,s)||Object.defineProperty(t,s,{configurable:!1,enumerable:!0,get:n})},o.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},o.n=function(t){var s=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(s,"a",s),s},o.o=function(t,s){return Object.prototype.hasOwnProperty.call(t,s)},o.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],c=r.push.bind(r);r.push=s,r=r.slice();for(var d=0;d<r.length;d++)s(r[d]);var u=c;i.push([14,0]),n()})({13:function(t,s){},14:function(t,s,n){t.exports=n("Vtdi")},"4r9V":function(t,s,n){"use strict";var e=n("9/38"),a=n.n(e);a.a},"6fxf":function(t,s,n){"use strict";var e=n("bNqW"),a=n.n(e);a.a},"7DnG":function(t,s,n){"use strict";var e=n("GGXb"),a=n.n(e);a.a},"7vII":function(t,s,n){},"9/38":function(t,s,n){},AOnC:function(t,s,n){"use strict";var e=n("RCtC"),a=n.n(e);a.a},G9df:function(t,s,n){t.exports=n.p+"img/rank_bg.ed141f67.jpg"},GGXb:function(t,s,n){},J5I2:function(t,s,n){},NAti:function(t,s,n){"use strict";var e=n("OoU0"),a=n.n(e);a.a},NnjG:function(t,s,n){t.exports=n.p+"img/fight_bg.6eee84c3.jpg"},Ocuh:function(t,s,n){"use strict";var e=n("e/yx"),a=n.n(e);a.a},OoU0:function(t,s,n){},RCtC:function(t,s,n){},RnhZ:function(t,s,n){var e={"./af":"K/tc","./af.js":"K/tc","./ar":"jnO4","./ar-dz":"o1bE","./ar-dz.js":"o1bE","./ar-kw":"Qj4J","./ar-kw.js":"Qj4J","./ar-ly":"HP3h","./ar-ly.js":"HP3h","./ar-ma":"CoRJ","./ar-ma.js":"CoRJ","./ar-sa":"gjCT","./ar-sa.js":"gjCT","./ar-tn":"bYM6","./ar-tn.js":"bYM6","./ar.js":"jnO4","./az":"SFxW","./az.js":"SFxW","./be":"H8ED","./be.js":"H8ED","./bg":"hKrs","./bg.js":"hKrs","./bm":"p/rL","./bm.js":"p/rL","./bn":"kEOa","./bn.js":"kEOa","./bo":"0mo+","./bo.js":"0mo+","./br":"aIdf","./br.js":"aIdf","./bs":"JVSJ","./bs.js":"JVSJ","./ca":"1xZ4","./ca.js":"1xZ4","./cs":"PA2r","./cs.js":"PA2r","./cv":"A+xa","./cv.js":"A+xa","./cy":"l5ep","./cy.js":"l5ep","./da":"DxQv","./da.js":"DxQv","./de":"tGlX","./de-at":"s+uk","./de-at.js":"s+uk","./de-ch":"u3GI","./de-ch.js":"u3GI","./de.js":"tGlX","./dv":"WYrj","./dv.js":"WYrj","./el":"jUeY","./el.js":"jUeY","./en-au":"Dmvi","./en-au.js":"Dmvi","./en-ca":"OIYi","./en-ca.js":"OIYi","./en-gb":"Oaa7","./en-gb.js":"Oaa7","./en-ie":"4dOw","./en-ie.js":"4dOw","./en-il":"czMo","./en-il.js":"czMo","./en-nz":"b1Dy","./en-nz.js":"b1Dy","./eo":"Zduo","./eo.js":"Zduo","./es":"iYuL","./es-do":"CjzT","./es-do.js":"CjzT","./es-us":"Vclq","./es-us.js":"Vclq","./es.js":"iYuL","./et":"7BjC","./et.js":"7BjC","./eu":"D/JM","./eu.js":"D/JM","./fa":"jfSC","./fa.js":"jfSC","./fi":"gekB","./fi.js":"gekB","./fo":"ByF4","./fo.js":"ByF4","./fr":"nyYc","./fr-ca":"2fjn","./fr-ca.js":"2fjn","./fr-ch":"Dkky","./fr-ch.js":"Dkky","./fr.js":"nyYc","./fy":"cRix","./fy.js":"cRix","./gd":"9rRi","./gd.js":"9rRi","./gl":"iEDd","./gl.js":"iEDd","./gom-latn":"DKr+","./gom-latn.js":"DKr+","./gu":"4MV3","./gu.js":"4MV3","./he":"x6pH","./he.js":"x6pH","./hi":"3E1r","./hi.js":"3E1r","./hr":"S6ln","./hr.js":"S6ln","./hu":"WxRl","./hu.js":"WxRl","./hy-am":"1rYy","./hy-am.js":"1rYy","./id":"UDhR","./id.js":"UDhR","./is":"BVg3","./is.js":"BVg3","./it":"bpih","./it.js":"bpih","./ja":"B55N","./ja.js":"B55N","./jv":"tUCv","./jv.js":"tUCv","./ka":"IBtZ","./ka.js":"IBtZ","./kk":"bXm7","./kk.js":"bXm7","./km":"6B0Y","./km.js":"6B0Y","./kn":"PpIw","./kn.js":"PpIw","./ko":"Ivi+","./ko.js":"Ivi+","./ky":"lgnt","./ky.js":"lgnt","./lb":"RAwQ","./lb.js":"RAwQ","./lo":"sp3z","./lo.js":"sp3z","./lt":"JvlW","./lt.js":"JvlW","./lv":"uXwI","./lv.js":"uXwI","./me":"KTz0","./me.js":"KTz0","./mi":"aIsn","./mi.js":"aIsn","./mk":"aQkU","./mk.js":"aQkU","./ml":"AvvY","./ml.js":"AvvY","./mn":"lYtQ","./mn.js":"lYtQ","./mr":"Ob0Z","./mr.js":"Ob0Z","./ms":"6+QB","./ms-my":"ZAMP","./ms-my.js":"ZAMP","./ms.js":"6+QB","./mt":"G0Uy","./mt.js":"G0Uy","./my":"honF","./my.js":"honF","./nb":"bOMt","./nb.js":"bOMt","./ne":"OjkT","./ne.js":"OjkT","./nl":"+s0g","./nl-be":"2ykv","./nl-be.js":"2ykv","./nl.js":"+s0g","./nn":"uEye","./nn.js":"uEye","./pa-in":"8/+R","./pa-in.js":"8/+R","./pl":"jVdC","./pl.js":"jVdC","./pt":"8mBD","./pt-br":"0tRk","./pt-br.js":"0tRk","./pt.js":"8mBD","./ro":"lyxo","./ro.js":"lyxo","./ru":"lXzo","./ru.js":"lXzo","./sd":"Z4QM","./sd.js":"Z4QM","./se":"//9w","./se.js":"//9w","./si":"7aV9","./si.js":"7aV9","./sk":"e+ae","./sk.js":"e+ae","./sl":"gVVK","./sl.js":"gVVK","./sq":"yPMs","./sq.js":"yPMs","./sr":"zx6S","./sr-cyrl":"E+lV","./sr-cyrl.js":"E+lV","./sr.js":"zx6S","./ss":"Ur1D","./ss.js":"Ur1D","./sv":"X709","./sv.js":"X709","./sw":"dNwA","./sw.js":"dNwA","./ta":"PeUW","./ta.js":"PeUW","./te":"XLvN","./te.js":"XLvN","./tet":"V2x9","./tet.js":"V2x9","./tg":"Oxv6","./tg.js":"Oxv6","./th":"EOgW","./th.js":"EOgW","./tl-ph":"Dzi0","./tl-ph.js":"Dzi0","./tlh":"z3Vd","./tlh.js":"z3Vd","./tr":"DoHr","./tr.js":"DoHr","./tzl":"z1FC","./tzl.js":"z1FC","./tzm":"wQk9","./tzm-latn":"tT3J","./tzm-latn.js":"tT3J","./tzm.js":"wQk9","./ug-cn":"YRex","./ug-cn.js":"YRex","./uk":"raLr","./uk.js":"raLr","./ur":"UpQW","./ur.js":"UpQW","./uz":"Loxo","./uz-latn":"AQ68","./uz-latn.js":"AQ68","./uz.js":"Loxo","./vi":"KSF8","./vi.js":"KSF8","./x-pseudo":"/X5v","./x-pseudo.js":"/X5v","./yo":"fzPg","./yo.js":"fzPg","./zh-cn":"XDpg","./zh-cn.js":"XDpg","./zh-hk":"SatO","./zh-hk.js":"SatO","./zh-tw":"kOpN","./zh-tw.js":"kOpN"};function a(t){var s=i(t),e=n(s);return e}function i(t){var s=e[t];if(!(s+1)){var n=new Error('Cannot find module "'+t+'".');throw n.code="MODULE_NOT_FOUND",n}return s}a.keys=function(){return Object.keys(e)},a.resolve=i,t.exports=a,a.id="RnhZ"},TFth:function(t,s,n){},Vtdi:function(t,s,n){"use strict";n.r(s);n("VRzm");var e=n("Kw5r"),a=n("Q/mQ"),i=n.n(a),o=n("ChK9"),r=n.n(o),c=n("gFX4"),d=n.n(c),u=n("wd/R"),m=n.n(u),l=(n("Ud79"),n("4JRs"),n("0G0I"),n("CHRH")),h=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"md-layout md-alignment-center-center",attrs:{id:"app"}},[n("router-view",{staticClass:"md-layout-item md-small-size-100 md-size-50"}),t._v(" "),n("div",{staticClass:"bg"})],1)},p=[],v=(n("f3/d"),n("INYr"),n("pIFo"),n("L2JU")),f={name:"app",computed:Object(v["b"])({user:function(t){return t.user},mchId:function(t){return t.mchId}}),mounted:function(){var t=this;this.user&&this.$socket.emit("online",{userId:this.user.uid,mchId:this.mchId}),this.$watch("user",function(){t.user?t.$socket.emit("online",{userId:t.user.uid,mchId:t.mchId}):t.$router.replace("/login")}),this.$socket.on("connect",function(){t.user&&t.$socket.emit("online",{userId:t.user.uid,mchId:t.mchId})}),this.$socket.on("logout",function(s){var n=s.userId,e=s.mchId;t.user&&t.user.uid===n&&t.mchId!==e&&t.$store.commit("logout")}),this.$socket.on("fight",function(s){var n=s.userIds,e=s.chapterId,a=s.roomId,i=s.chapterName;-1!==n.map(function(t){return parseInt(t)}).findIndex(function(s){return s===t.user.uid})&&("battle"===t.$router.currentRoute.name?t.$router.replace({path:"/battle",query:{roomId:a,chapterId:e,chapterName:i}}):t.$router.push({path:"/battle",query:{roomId:a,chapterId:e,chapterName:i}}))})}},_=f,g=(n("nNx0"),n("KHd+")),k=Object(g["a"])(_,h,p,!1,null,null,null),j=k.exports,w=n("jE9Z"),b=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"home"},[t._m(0),t._v(" "),e("person-card"),t._v(" "),e("img",{staticClass:"md-raised md-primary link",attrs:{id:"fight",src:n("NnjG")},on:{click:function(s){t.$router.push("/topic-chosen")}}}),t._v(" "),e("img",{staticClass:"md-raised md-primary link",attrs:{id:"record",src:n("XvsG")},on:{click:function(s){t.$router.push("/record")}}}),t._v(" "),e("img",{staticClass:"md-raised md-primary link",attrs:{id:"rank",src:n("G9df")},on:{click:function(s){t.$router.push("/ranking")}}})],1)},C=[function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"md-layout"},[n("p",[t._v("通信工知识竞技对战平台")])])}],y=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("md-card",{staticClass:"md-primary"},[e("md-card-content",[e("md-avatar",{staticClass:"md-large"},[e("img",{attrs:{src:n("zwU1"),alt:"Avatar"}})]),t._v(" "),e("div",{staticClass:"name"},[t._v(t._s(t.user.nickname))])],1),t._v(" "),e("md-card-actions",[e("md-button",{attrs:{to:"/personal"}},[t._v("修改资料")]),t._v(" "),e("md-button",{staticClass:"md-accent md-raised",on:{click:function(s){t.logout()}}},[t._v("退出登录")])],1)],1)},I=[],R={name:"person-card",computed:Object(v["b"])({user:function(t){return t.user}}),data:function(){return{amount:50}},methods:{logout:function(){this.$store.commit("logout")}}},x=R,z=(n("NAti"),Object(g["a"])(x,y,I,!1,null,"19f6a4d2",null)),O=z.exports,$={components:{PersonCard:O},name:"home"},Q=$,S=(n("zVNI"),Object(g["a"])(Q,b,C,!1,null,"0103487d",null)),M=S.exports,N=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("md-card",{staticClass:"login"},[n("md-card-header",[n("div",{staticClass:"md-title"},[t._v("登录")])]),t._v(" "),n("md-card-content",[n("div",{staticClass:"md-layout md-size-75 md-alignment-center"},[n("md-field",{staticClass:"md-layout-item md-size-75"},[n("label",[t._v("昵称")]),t._v(" "),n("md-input",{model:{value:t.nickname,callback:function(s){t.nickname=s},expression:"nickname"}})],1),t._v(" "),n("md-field",{staticClass:"md-layout-item md-size-75"},[n("label",[t._v("密码")]),t._v(" "),n("md-input",{attrs:{type:"password"},model:{value:t.password,callback:function(s){t.password=s},expression:"password"}})],1),t._v(" "),n("md-button",{staticClass:"md-raised md-primary md-layout-item md-size-75",attrs:{disabled:!t.nickname||!t.password},on:{click:function(s){t.login()}}},[t._v("登录")]),t._v(" "),n("md-button",{staticClass:"md-flat md-primary md-layout-item md-size-75",attrs:{to:"/register"}},[t._v("尚未注册？")])],1)]),t._v(" "),n("md-snackbar",{attrs:{"md-position":"left","md-duration":2e3,"md-active":t.showSnack,"md-persistent":""},on:{"update:mdActive":function(s){t.showSnack=s}}},[n("span",[t._v(t._s(t.msg))])])],1)},P=[],q={name:"login",data:function(){return{nickname:"",password:"",msg:"",showSnack:!1}},methods:{login:function(){var t=this;this.$http.post("/user/login",{nickname:this.nickname,password:this.password}).then(function(s){t.$store.commit("setUser",s),t.$router.replace("/")}).catch(function(s){t.msg=s.msg,t.showSnack=!0})}}},D=q,B=(n("7DnG"),Object(g["a"])(D,N,P,!1,null,"5853ed2d",null)),U=B.exports,A=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("md-card",{staticClass:"register"},[n("md-card-header",[n("div",{staticClass:"md-title"},[t._v("注册")])]),t._v(" "),n("md-card-content",[n("div",{staticClass:"md-layout md-size-75 md-alignment-center"},[n("md-field",{staticClass:"md-layout-item md-size-75"},[n("label",[t._v("昵称")]),t._v(" "),n("md-input",{model:{value:t.nickname,callback:function(s){t.nickname=s},expression:"nickname"}})],1),t._v(" "),n("md-field",{staticClass:"md-layout-item md-size-75"},[n("label",[t._v("密码")]),t._v(" "),n("md-input",{attrs:{type:"password"},model:{value:t.password,callback:function(s){t.password=s},expression:"password"}})],1),t._v(" "),n("md-button",{staticClass:"md-raised md-primary md-layout-item md-size-75",attrs:{disabled:!t.nickname||!t.password},on:{click:function(s){t.register()}}},[t._v("注册")]),t._v(" "),n("md-button",{staticClass:"md-flat md-primary md-layout-item md-size-75",attrs:{to:"/login"}},[t._v("已有账号？")])],1)]),t._v(" "),n("md-snackbar",{attrs:{"md-position":"left","md-duration":2e3,"md-active":t.showSnack,"md-persistent":""},on:{"update:mdActive":function(s){t.showSnack=s}}},[n("span",[t._v(t._s(t.msg))])])],1)},E=[],V={name:"register",data:function(){return{nickname:"",password:"",showSnack:!1,msg:""}},methods:{register:function(){var t=this;this.$http.post("/user/save",{nickname:this.nickname,password:this.password}).then(function(s){t.msg="注册成功，即将跳转至登录页面…",t.showSnack=!0,window.setTimeout(function(){t.$router.push("/login")},2e3)}).catch(function(s){t.msg=s.msg,t.showSnack=!0})}}},T=V,Y=(n("hhSi"),Object(g["a"])(T,A,E,!1,null,"622d0038",null)),X=Y.exports,G=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"topic-chosen"},[n("div",{staticClass:"header md-layout md-alignment-center-left",on:{click:function(s){t.goBack()}}},[n("icon",{attrs:{name:"angle-left",scale:"2"}}),t._v(" "),n("span",{staticClass:"text"},[t._v("双人对战")])],1),t._v(" "),n("person-card"),t._v(" "),n("md-list",{staticClass:"md-elevation-2"},t._l(t.courses,function(s){return n("md-list-item",{key:s.courseId,attrs:{"md-expand":""}},[n("span",{staticClass:"md-list-item-text"},[t._v(t._s(s.course))]),t._v(" "),n("md-list",{attrs:{slot:"md-expand"},slot:"md-expand"},t._l(s.chapters,function(s){return n("md-list-item",{key:s.chapterId,staticClass:"md-inset",on:{click:function(n){t.startBattle(s.chapterId,s.chapter)}}},[t._v(t._s(s.chapter))])}))],1)})),t._v(" "),n("md-dialog",{attrs:{"md-active":t.showMatching},on:{"update:mdActive":function(s){t.showMatching=s}}},[n("md-dialog-title",[t._v("正在寻找与你实力相当的对手……")]),t._v(" "),n("md-dialog-actions",[n("md-button",{staticClass:"md-primary",on:{click:function(s){t.cancelMatch()}}},[t._v("退出匹配")])],1)],1)],1)},J=[],W={apiRoot:"http://brain.vipgz1.idcfengye.com",socketRoot:"http://207wd53175.imwork.net:56025"},F=W,K={components:{PersonCard:O},name:"topic-chosen",mounted:function(){var t=this;this.$http.post("/question/getCourseAndChapter").then(function(s){t.courses=s.filter(function(t){return t.chapters.length})}),this.matchRoom=d()("".concat(F.socketRoot,"/match")),this.matchRoom.on("success",function(s){-1!==s.userIds.map(function(t){return parseInt(t)}).findIndex(function(s){return s===t.$store.state.user.uid})&&t.matchingId&&(t.matchRoom.disconnect(),t.$router.push({path:"/battle",query:{roomId:s.roomId,chapterId:t.matchingId,chapterName:t.matchingName}}))})},beforeDestroy:function(){delete this.$options.sockets.success},methods:{startBattle:function(t,s){this.matchingId||(this.matchRoom.open(),this.matchRoom.emit("start",{userId:this.$store.state.user.uid,chapterId:t}),this.matchingId=t,this.matchingName=s,this.showMatching=!0)},cancelMatch:function(){this.matchRoom.emit("cancel",{userId:this.$store.state.user.uid,chapterId:this.matchingId}),this.matchingId="",this.matchingName="",this.showMatching=!1},goBack:function(){this.$router.back()}},data:function(){return{amount:50,courses:[],showDialog:!1,showMatching:!1,matchingId:"",matchingName:""}}},Z=K,L=(n("Ocuh"),Object(g["a"])(Z,G,J,!1,null,"80d5070a",null)),H=L.exports,tt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("div",{staticClass:"header md-layout md-alignment-center-left",on:{click:function(s){t.goBack()}}},[e("icon",{attrs:{name:"angle-left",scale:"2"}}),t._v(" "),e("span",{staticClass:"text"},[t._v("对战")])],1),t._v(" "),e("div",{staticClass:"battle md-elevation-2"},[e("div",{staticClass:"battle-header"},[t.me?e("div",{staticClass:"me"},[e("div",{staticClass:"avatar"},[e("md-avatar",{staticClass:"md-large"},[e("img",{attrs:{src:n("zwU1"),alt:"Avatar"}})])],1),t._v(" "),e("span",[t._v(t._s(t.me.userName))])]):t._e(),t._v(" "),e("div",{staticClass:"timer"},[e("div",{staticClass:"seconds"},[t._v(t._s(t.time)+"S")]),t._v(" "),e("div",{staticClass:"chapter"},[t._v(t._s(t.chapterName))])]),t._v(" "),t.opponent?e("div",{staticClass:"opponent"},[e("div",{staticClass:"avatar"},[e("md-avatar",{staticClass:"md-large"},[e("img",{attrs:{src:n("zwU1"),alt:"Avatar"}})])],1),t._v(" "),e("span",[t._v(t._s(t.opponent.userName))])]):t._e()]),t._v(" "),e("div",{staticClass:"md-layout"},[e("div",{staticClass:"counter"},[e("div",{staticClass:"bar"},[e("div",{staticClass:"fill",style:{height:20*t.myRightCount+"%"}})]),t._v(" "),e("div",[t._v(t._s(t.myRightCount)+"/5")])]),t._v(" "),e("div",{staticClass:"md-layout-item"},[[e("p",{staticClass:"question"},[t._v(t._s(t.currentQuestion))]),t._v(" "),e("div",{staticClass:"answers"},t._l(t.currentOptions,function(s){return e("md-button",{staticClass:"md-raised",on:{click:function(n){t.select(s)}}},[t._v(t._s(s.name)+": "+t._s(s.value))])}))]],2),t._v(" "),e("div",{staticClass:"counter"},[e("div",{staticClass:"bar"},[e("div",{staticClass:"fill",style:{height:20*t.opponentRightCount+"%"}})]),t._v(" "),e("div",[t._v(t._s(t.opponentRightCount)+"/5")])])])]),t._v(" "),e("md-snackbar",{attrs:{"md-position":"left","md-duration":1e3,"md-active":t.showSnackbar,"md-persistent":""},on:{"update:mdActive":function(s){t.showSnackbar=s}}},[e("span",[t._v(t._s(t.snackMsg))])]),t._v(" "),e("md-dialog",{attrs:{"md-active":t.waiting},on:{"update:mdActive":function(s){t.waiting=s}}},[e("md-dialog-title",[t._v(t._s(t.waitMsg))]),t._v(" "),e("md-dialog-actions",[e("md-button",{staticClass:"md-primary",on:{click:function(s){t.goBack()}}},[t._v("放弃比赛")])],1)],1),t._v(" "),e("md-dialog",{attrs:{"md-active":t.result},on:{"update:mdActive":function(s){t.result=s}}},[e("md-dialog-title",[t._v(t._s(t.resultMsg))]),t._v(" "),t.uploading?e("p",{staticClass:"uploading"},[t._v("结果上传中……")]):t._e(),t._v(" "),e("md-dialog-actions",[e("md-button",{staticClass:"md-primary",attrs:{disabled:t.uploading},on:{click:function(s){t.goBack()}}},[t._v("返回")])],1)],1)],1)},st=[],nt={name:"battle",data:function(){return{second:10,me:null,opponent:null,roomId:"",chapterId:"",chapterName:"",waitMsg:"正在等待你的对手进入房间……",waiting:!0,currentQuestion:"",currentOptions:[],currentQuestionIndex:0,myRightCount:0,opponentRightCount:0,snackMsg:"",showSnackbar:!1,result:!1,resultMsg:"",uploading:!1,time:10,timer:null,isOver:!1}},mounted:function(){var t=this,s=this.$router.currentRoute.query;this.roomId=s.roomId,this.chapterId=s.chapterId,this.chapterName=s.chapterName,this.questions=[];var n=d()("".concat(F.socketRoot,"/room/").concat(this.roomId));n.emit("ready",{userId:this.$store.state.user.uid,chapterId:this.chapterId}),n.on("begin",function(s){var n=s.playerOne,e=s.playerTwo,a=s.questions;parseInt(n.uid)===t.$store.state.user.uid?(t.me=n,t.opponent=e):(t.me=e,t.opponent=n),t.me.answers=[],t.opponent.answers=[],t.questions=a,t.currentQuestion=t.questions[t.currentQuestionIndex].question,t.currentOptions=t.questions[t.currentQuestionIndex].options,t.waiting=!1,t.startTimer()}),n.on("opponentAnswer",function(s){var n=s.questionId,e=s.answer;t.opponent.answers=t.opponent.answers||[],t.opponent.answers.push({questionId:n,answer:e});var a=t.questions.findIndex(function(t){return t.questionId===n});-1!==a&&t.questions[a].answer===e&&(t.opponentRightCount++,t.showSnackBarMethod("你的对手答对了一题！"))}),n.on("over",function(s){var e=s.opponentQuit,a=s.requestUserId;t.waiting&&(t.waiting=!1),!0===e?t.showQuitResult():t.showResult(),a===t.$store.state.user.uid&&(t.uploading=!0,t.$http.post("/brain/saveAnswers",{result:[{userId:t.me.uid,answers:t.me.answers.filter(function(t){return"TimeOut"!==t.answer})},{userId:t.opponent.uid,answers:t.opponent.answers.filter(function(t){return"TimeOut"!==t.answer})}]}).then(function(s){t.uploading=!1})),t.isOver=!0,n.disconnect(!0)}),this.playRoom=n},beforeDestroy:function(){this.isOver||(this.playRoom.emit("quit",{userId:this.$store.state.user.uid,chapterId:this.chapterId}),this.playRoom.disconnect(!0))},methods:{startTimer:function(){var t=this;this.timer&&window.clearInterval(this.timer),this.time=10,this.timer=window.setInterval(function(){t.time--,0===t.time&&(window.clearInterval(t.timer),t.select({name:"TimeOut"}))},1e3)},goBack:function(){this.$router.back()},showSnackBarMethod:function(t){this.snackMsg=t,this.showSnackbar=!0},showWaitingMethod:function(t){this.waitMsg=t,this.waiting=!0},showResult:function(){this.myRightCount>this.opponentRightCount?this.resultMsg="恭喜你战胜了 @".concat(this.opponent.userName,"。"):this.myRightCount<this.opponentRightCount?this.resultMsg="很遗憾你被 @".concat(this.opponent.userName," 打败了"):this.resultMsg="你跟 @".concat(this.opponent.userName," 握手言和"),this.result=!0},showQuitResult:function(){this.opponent&&(this.resultMsg="@".concat(this.opponent.userName," 落荒而逃，你赢得了比赛。"),this.result=!0)},select:function(t){this.me.answers=this.me.answers||[];var s={questionId:this.questions[this.currentQuestionIndex].questionId,answer:t.name};this.me.answers.push(s),this.playRoom.emit("answer",s),this.questions[this.currentQuestionIndex].answer===t.name&&(this.myRightCount++,this.showSnackBarMethod("你答对了~~")),this.currentQuestionIndex++,this.currentQuestionIndex<5?(this.currentQuestion=this.questions[this.currentQuestionIndex].question,this.currentOptions=this.questions[this.currentQuestionIndex].options,this.startTimer()):(this.playRoom.emit("finish",{userId:this.$store.state.user.uid}),this.showWaitingMethod("你已完成答题，请等待对手完成"),this.timer&&window.clearInterval(this.timer))}}},et=nt,at=(n("h/fh"),Object(g["a"])(et,tt,st,!1,null,"5dda71b0",null)),it=at.exports,ot=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"record"},[n("div",{staticClass:"header md-layout md-alignment-center-left",on:{click:function(s){t.goBack()}}},[n("icon",{attrs:{name:"angle-left",scale:"2"}}),t._v(" "),n("span",{staticClass:"text"},[t._v("战绩")])],1),t._v(" "),n("person-card"),t._v(" "),n("md-card",{staticStyle:{"over-flow":"auto",height:"58%","border-radius":"10px"}},[n("md-content",{staticClass:"record-stats md-layout md-alignment-center-space-around"},[n("div",{staticClass:"stat"},[n("div",{staticClass:"data"},[t._v(t._s(t.totalQuesstion))]),t._v(" "),n("div",{staticClass:"title"},[t._v("答题")])]),t._v(" "),n("div",{staticClass:"stat"},[n("div",{staticClass:"data"},[t._v(t._s(t.totalSession))]),t._v(" "),n("div",{staticClass:"title"},[t._v("总场次")])])]),t._v(" "),n("md-divider"),t._v(" "),n("md-table",[n("md-table-row",[n("md-table-head",{attrs:{"md-numeric":""}},[t._v("作答时间")]),t._v(" "),n("md-table-head",[t._v("题目名称")]),t._v(" "),n("md-table-head",[t._v("次数")])],1),t._v(" "),t._l(t.questionRecord,function(s){return n("md-table-row",[n("md-table-head",{attrs:{"md-numeric":""}},[t._v(t._s(t.moment.unix(parseInt(s.answertime)).fromNow()))]),t._v(" "),n("md-table-head",[t._v(t._s(s.question))]),t._v(" "),n("md-table-head",[t._v(t._s(s.count))])],1)})],2)],1)],1)},rt=[],ct={components:{PersonCard:O},name:"record",data:function(){return{questionRecord:[],totalQuesstion:"0",totalSession:"0",moment:m.a}},mounted:function(){var t=this;this.$http.post("/user/getUserGains",{uid:this.$store.state.user.uid}).then(function(s){t.questionRecord=s.questionRecord,t.totalQuesstion=s.totalQuesstion,t.totalSession=s.totalSession})},methods:{goBack:function(){this.$router.back()}}},dt=ct,ut=(n("4r9V"),Object(g["a"])(dt,ot,rt,!1,null,"3d4cfd82",null)),mt=ut.exports,lt=function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{staticClass:"personal"},[e("div",{staticClass:"header md-layout md-alignment-center-left",on:{click:function(s){t.goBack()}}},[e("icon",{attrs:{name:"angle-left",scale:"2"}}),t._v(" "),e("span",{staticClass:"text"},[t._v("修改资料")])],1),t._v(" "),e("md-card",[e("md-card-content",[e("md-avatar",{staticClass:"md-large"},[e("img",{attrs:{src:n("zwU1"),alt:"Avatar"}})]),t._v(" "),e("div",{staticClass:"md-layout md-size-75 md-alignment-center"},[e("md-field",{staticClass:"md-layout-item md-size-75"},[e("label",[t._v("姓名")]),t._v(" "),e("md-input",{model:{value:t.nickname,callback:function(s){t.nickname=s},expression:"nickname"}})],1),t._v(" "),e("md-field",{staticClass:"md-layout-item md-size-75"},[e("label",[t._v("原密码")]),t._v(" "),e("md-input",{attrs:{type:"password"},model:{value:t.oldPassword,callback:function(s){t.oldPassword=s},expression:"oldPassword"}})],1),t._v(" "),e("md-field",{staticClass:"md-layout-item md-size-75"},[e("label",[t._v("新密码")]),t._v(" "),e("md-input",{attrs:{type:"password"},model:{value:t.newPassword,callback:function(s){t.newPassword=s},expression:"newPassword"}})],1),t._v(" "),e("md-button",{staticClass:"md-raised md-primary md-layout-item md-size-75",attrs:{disabled:!t.newPassword},on:{click:function(s){t.update()}}},[t._v("确认更改")])],1)],1),t._v(" "),e("md-snackbar",{attrs:{"md-position":"left","md-duration":2e3,"md-active":t.showSnack,"md-persistent":""},on:{"update:mdActive":function(s){t.showSnack=s}}},[e("span",[t._v(t._s(t.msg))])])],1)],1)},ht=[],pt={name:"personal",data:function(){return{oldPassword:"",newPassword:"",msg:"",showSnack:!1}},computed:{nickname:{get:function(){return this.$store.state.user.nickname},set:function(t){this.$store.commit("updateNickname",t)}}},methods:{update:function(){var t=this;this.newPassword&&this.$http.post("/user/update",{uid:this.$store.state.user.uid,nickname:this.nickname,oldPassword:this.oldPassword,newPassword:this.newPassword}).then(function(){t.msg="修改成功",t.showSnack=!0}).catch(function(s){t.msg=s.msg,t.showSnack=!0})},goBack:function(){this.$router.back()}}},vt=pt,ft=(n("6fxf"),Object(g["a"])(vt,lt,ht,!1,null,"89dcc388",null)),_t=ft.exports,gt=function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{staticClass:"ranking"},[n("div",{staticClass:"header md-layout md-alignment-center-left",on:{click:function(s){t.goBack()}}},[n("icon",{attrs:{name:"angle-left",scale:"2"}}),t._v(" "),n("span",{staticClass:"text"},[t._v("排名")])],1),t._v(" "),n("person-card"),t._v(" "),n("md-card",[n("md-table",[t.myRanking&&1==parseInt(t.myRanking.rank)?n("md-table-row",{staticClass:"my-rank"},[n("md-table-head",{attrs:{"md-numeric":""}},[n("span",{staticClass:"first-rank-position"},[t._v(t._s(t.myRanking.rank))])]),t._v(" "),n("md-table-head",[n("span",{staticClass:"first-rank-content"},[t._v(t._s(t.myRanking.nickname))])]),t._v(" "),n("md-table-head",[n("span",{staticClass:"first-rank-content"},[t._v("答题数："+t._s(t.myRanking.totalQuesstion))])])],1):t.myRanking&&2==parseInt(t.myRanking.rank)?n("md-table-row",{staticClass:"my-rank"},[n("md-table-head",{attrs:{"md-numeric":""}},[n("span",{staticClass:"second-rank-position"},[t._v(t._s(t.myRanking.rank))])]),t._v(" "),n("md-table-head",[n("span",{staticClass:"second-rank-content"},[t._v(t._s(t.myRanking.nickname))])]),t._v(" "),n("md-table-head",[n("span",{staticClass:"second-rank-content"},[t._v("答题数："+t._s(t.myRanking.totalQuesstion))])])],1):t.myRanking&&3==parseInt(t.myRanking.rank)?n("md-table-row",{staticClass:"my-rank"},[n("md-table-head",{attrs:{"md-numeric":""}},[n("span",{staticClass:"third-rank-position"},[t._v(t._s(t.myRanking.rank))])]),t._v(" "),n("md-table-head",[n("span",{staticClass:"third-rank-content"},[t._v(t._s(t.myRanking.nickname))])]),t._v(" "),n("md-table-head",[n("span",{staticClass:"third-rank-content"},[t._v("答题数："+t._s(t.myRanking.totalQuesstion))])])],1):t.myRanking&&parseInt(t.myRanking.rank)>3?n("md-table-row",{staticClass:"my-rank"},[n("md-table-head",{attrs:{"md-numeric":""}},[n("span",{staticClass:"third-rank-position"},[t._v(t._s(t.myRanking.rank))])]),t._v(" "),n("md-table-head",[n("span",{staticClass:"third-rank-content"},[t._v(t._s(t.myRanking.nickname))])]),t._v(" "),n("md-table-head",[n("span",{staticClass:"third-rank-content"},[t._v("答题数："+t._s(t.myRanking.totalQuesstion))])])],1):t._e(),t._v(" "),t._l(t.theirRanking,function(s,e){return[n("md-table-row",0==e?[n("md-table-head",{attrs:{"md-numeric":""}},[n("span",{staticClass:"first-rank-position"},[t._v(t._s(s.rank))])]),t._v(" "),n("md-table-head",[n("span",{staticClass:"first-rank-content"},[t._v(t._s(s.nickname))])]),t._v(" "),n("md-table-head",[n("span",{staticClass:"first-rank-content"},[t._v("答题数："+t._s(s.totalQuesstion))])])]:1==e?[n("md-table-head",{attrs:{"md-numeric":""}},[n("span",{staticClass:"second-rank-position"},[t._v(t._s(s.rank))])]),t._v(" "),n("md-table-head",[n("span",{staticClass:"second-rank-content"},[t._v(t._s(s.nickname))])]),t._v(" "),n("md-table-head",[n("span",{staticClass:"second-rank-content"},[t._v("答题数："+t._s(s.totalQuesstion))])])]:2==e?[n("md-table-head",{attrs:{"md-numeric":""}},[n("span",{staticClass:"third-rank-position"},[t._v(t._s(s.rank))])]),t._v(" "),n("md-table-head",[n("span",{staticClass:"third-rank-content"},[t._v(t._s(s.nickname))])]),t._v(" "),n("md-table-head",[n("span",{staticClass:"third-rank-content"},[t._v("答题数："+t._s(s.totalQuesstion))])])]:[n("md-table-head",{attrs:{"md-numeric":""}},[n("span",{staticClass:"other-rank-position"},[t._v(t._s(s.rank))])]),t._v(" "),n("md-table-head",[n("span",{staticClass:"other-rank-content"},[t._v(t._s(s.nickname))])]),t._v(" "),n("md-table-head",[n("span",{staticClass:"other-rank-content"},[t._v("答题数："+t._s(s.totalQuesstion))])])],1)]})],2)],1)],1)},kt=[],jt={components:{PersonCard:O},name:"ranking",data:function(){return{myRanking:null,theirRanking:[]}},mounted:function(){var t=this;this.$http.post("/user/getRank",{uid:this.$store.state.user.uid}).then(function(s){t.myRanking=s.user,t.theirRanking=s.users})},methods:{goBack:function(){this.$router.back()}}},wt=jt,bt=(n("AOnC"),Object(g["a"])(wt,gt,kt,!1,null,"6401c582",null)),Ct=bt.exports;e["default"].use(w["a"]);var yt=new w["a"]({routes:[{path:"/",name:"home",component:M},{path:"/login",name:"login",component:U},{path:"/register",name:"register",component:X},{path:"/personal",name:"personal",component:_t},{path:"/topic-chosen",name:"topic-chosen",component:H},{path:"/battle",name:"battle",component:it},{path:"/record",name:"record",component:mt},{path:"/ranking",name:"ranking",component:Ct}]}),It=n("DkTT"),Rt=n("xDdU"),xt=n.n(Rt);e["default"].use(v["a"]);var zt=new v["a"].Store({state:{user:null,mchId:""},mutations:{setUser:function(t,s){t.mchId=xt()(),t.user=s},logout:function(t){t.mchId="",t.user=null},updateNickname:function(t,s){t.user&&(t.user.nickname=s)}},actions:{},plugins:[Object(It["a"])({storage:window.sessionStorage})]}),Ot=n("vDqi"),$t=n.n(Ot);$t.a.defaults.baseURL=F.apiRoot,$t.a.defaults.headers.post["Content-Type"]="application/json;charset=UTF-8",$t.a.interceptors.response.use(function(t){return t},function(t){return console.log(t),Promise.reject(t)});var Qt=function(t){console.log(t);var s=t.data,n=s.data,e=s.status;return 200!==parseInt(e)?Promise.reject(t.data):Promise.resolve(n)};e["default"].prototype.$http={get:function(t,s){return $t.a.get(t,{params:s}).then(Qt)},post:function(t,s){return $t.a.post(t,s).then(Qt)},put:function(t,s){return $t.a.put(t,s).then(Qt)},del:function(t,s){return $t.a.delete(t,{params:s}).then(Qt)}};m.a.locale("zh-cn");var St=["/login","/register"];yt.beforeEach(function(t,s,n){zt.state.user||-1!==St.indexOf(t.path)?n():n({path:"/login"})}),e["default"].config.productionTip=!1,e["default"].use(i.a),e["default"].use(r.a,d()(F.socketRoot)),e["default"].component("icon",l["a"]),new e["default"]({router:yt,store:zt,render:function(t){return t(j)}}).$mount("#app")},XvsG:function(t,s,n){t.exports=n.p+"img/record_bg.1202e874.jpg"},bNqW:function(t,s,n){},"e/yx":function(t,s,n){},fnoW:function(t,s,n){},"h/fh":function(t,s,n){"use strict";var e=n("TFth"),a=n.n(e);a.a},hhSi:function(t,s,n){"use strict";var e=n("J5I2"),a=n.n(e);a.a},nNx0:function(t,s,n){"use strict";var e=n("fnoW"),a=n.n(e);a.a},zVNI:function(t,s,n){"use strict";var e=n("7vII"),a=n.n(e);a.a},zwU1:function(t,s,n){t.exports=n.p+"img/logo.0a52e065.png"}});
//# sourceMappingURL=app.700f8bd2.js.map